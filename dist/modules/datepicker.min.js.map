{"version":3,"sources":["modules/datepicker.js"],"names":["angular","container","provider","keyboard","this","defaults","html","delay","useNative","dateType","dateFormat","timezone","modelDateFormat","dayFormat","monthFormat","yearFormat","monthTitleFormat","yearTitleFormat","strictFormat","autoclose","minDate","Infinity","maxDate","startView","minView","startWeek","daysOfWeekDisabled","hasToday","hasClear","iconLeft","iconRight","screenReaderDateFormat","focusOnOpen","$get","isNative","isTouch","DatepickerFactory","$datepicker","options","$options","pickerViews","datepickerViews","scope","evt","apply","test","keyCode","shiftKey","altKey","preventDefault","stopPropagation","setMode","$mode","undefined","$apply","$select","date","disabled","hide","_init","init","$isSelected","el","focused","element","focus","$views","views","viewDate","$iconLeft","$iconRight","$hasToday","id","dropdownId","$nextLabel","labelNext","$previousLabel","$picker","handleOnKeyDown","$toggleMode","select","value","Date","length","$setToday","$clear","$focused","selectedDayId","dayInfo","isNext","update","selected","$onKeyDown","continueHandling","onKeyDown","inTable","day","parent","relatedTarget","$onFocusOut","$window","document","body","isDate","updateDisabledDates","disabledDateRanges","dateRanges","$date","forEach","i","$build","controller","$dateValue","rows","$setDisabledEl","keep","$setViewValue","$render","copy","extend","year","getFullYear","month","getDate","mode","pristine","built","call","$updateSelected","updateSelected","build","isSelected","steps","targetDate","getUTCFullYear","getUTCMonth","$selectPane","UTC","$onMouseDown","getUTCDate","targetEl","parentScope","$digest","focusElement","prop","attr","_destroy","destroy","off","_show","show","$element","$timeout","$isShown","on","_hide","blur","directive","$scope","link","lang","$dateFormatter","getDefaultLocale","require","navigator","userAgent","restrict","falseValueRegExp","previousValue","normalizeDateRanges","ranges","disabledRanges","datepicker","isMaxValid","isValid","isMinValid","isNaN","parsedDate","getTime","$parsers","unshift","viewValue","$setValidity","getDateFormattedString","formatDate","key","isDefined","$eval","bsKey","format","dateParser","$dateParser","strict","bsShow","isString","newValue","$watch","oldValue","match","validateAgainstMinMaxDate","$observe","disabledDates","timezoneOffsetAdjust","$formatters","modelValue","isUndefined","NaN","parse","postLink","arrays","mod","n","m","arr","splice","size","$sce","weekDaysMin","weekdaysShort","weekDaysShortLabels","weekDaysLongLabels","weekDaysLabelsHtml","weekDayLabel","weekdays","slice","concat","startDate","getMonth","split","picker","firstDayOfMonth","firstDayOfMonthOffset","getTimezoneOffset","firstDate","firstDateOffset","days","selectedDay","todayDay","daylightSavingAdjust","dayItem","label","isToday","screenReaderLabel","getDatetimeFormat","muted","defaultFirstDayTabIndex","push","title","showLabels","labels","isTodayDisabled","hasSelectedDate","$modeLabel","isDisabled","time","indexOf","getDay","actualTime","target","find","hasClass","newDate","name","months","selectedMonth","monthItem","thisMonthDate","thisMonth","lastDate","actualMonth","setMonth","parseInt","firstYear","years","selectedYear","yearItem","thisYear","startYear","endYear","$modelLabel","actualYear","setYear","Array","prototype"],"mappings":"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","file":"datepicker.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.datepicker', ['mgcrea.ngStrap.helpers.dateParser', 'mgcrea.ngStrap.helpers.dateFormatter', 'mgcrea.ngStrap.helpers.focusElement', 'mgcrea.ngStrap.helpers.ngFocusOut', 'mgcrea.ngStrap.tooltip'])\r\n  .provider('$datepicker', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      // Uncommenting the following line will break backwards compatability\r\n      // prefixEvent: 'datepicker',\r\n      prefixClass: 'datepicker',\r\n      placement: 'bottom-left',\r\n      templateUrl: 'datepicker/datepicker.tpl.html',\r\n      trigger: 'focus',\r\n      container: false,\r\n      keyboard: true,\r\n      html: false,\r\n      delay: 0,\r\n      // lang: $locale.id,\r\n      useNative: false,\r\n      dateType: 'date',\r\n      dateFormat: 'shortDate',\r\n      timezone: null,\r\n      modelDateFormat: null,\r\n      dayFormat: 'dd',\r\n      monthFormat: 'MMM',\r\n      yearFormat: 'yyyy',\r\n      monthTitleFormat: 'MMMM yyyy',\r\n      yearTitleFormat: 'yyyy',\r\n      strictFormat: false,\r\n      autoclose: false,\r\n      minDate: -Infinity,\r\n      maxDate: +Infinity,\r\n      startView: 0,\r\n      minView: 0,\r\n      startWeek: 0,\r\n      daysOfWeekDisabled: '',\r\n      hasToday: false,\r\n      hasClear: false,\r\n      iconLeft: 'glyphicon glyphicon-chevron-left',\r\n      iconRight: 'glyphicon glyphicon-chevron-right',\r\n      // The format that will be given to the screen reader values placed in the DOM.\r\n      screenReaderDateFormat: 'fullDate',\r\n      // Focuses the table element in the dropdown upon display of the picker.\r\n      // Used mainly in 508 situations when a button is pressed via a keyboard to show the calendar.\r\n      focusOnOpen: false\r\n    };\r\n\r\n    this.$get = function ($window, $document, $rootScope, $sce, $dateFormatter, datepickerViews, $tooltip, $timeout) {\r\n\r\n      var isNative = /(ip[ao]d|iphone|android)/ig.test($window.navigator.userAgent);\r\n      var isTouch = ('createTouch' in $window.document) && isNative;\r\n      if (!defaults.lang) defaults.lang = $dateFormatter.getDefaultLocale();\r\n\r\n      function DatepickerFactory (element, controller, config) {\r\n\r\n        // The datepicker is based on the tooltip control. Build a basic tooltip from the\r\n        // defaults and the configuration passed.\r\n        var $datepicker = $tooltip(element, angular.extend({}, defaults, config));\r\n        var parentScope = config.scope;\r\n        var options = $datepicker.$options;\r\n        var scope = $datepicker.$scope;\r\n        if (options.startView) options.startView -= options.minView;\r\n\r\n        // Add assistive technology helper attributes.\r\n        element.attr('aria-expanded', 'false').attr('aria-haspopup', 'true');\r\n\r\n        // View vars\r\n\r\n        // Initialize the datepicker view collection by passing a reference to the base object.\r\n        var pickerViews = datepickerViews($datepicker);\r\n        $datepicker.$views = pickerViews.views;\r\n        var viewDate = pickerViews.viewDate;\r\n        /*\r\n         * View mode for the date picker.\r\n         * 0: days\r\n         * 1: months\r\n         * 2: years\r\n         */\r\n        scope.$mode = options.startView;\r\n        // icon class override\r\n        scope.$iconLeft = options.iconLeft;\r\n        scope.$iconRight = options.iconRight;\r\n        // Show buttons at the bottom of the picker.\r\n        scope.$hasToday = options.hasToday;\r\n        scope.$hasClear = options.hasClear;\r\n        /*\r\n         * An id on the element is necessary when working with assistive technologies. The view will use the id to build out the\r\n         * aria attributes which are linked via ids.\r\n         */\r\n        scope.id = options.id !== null && options.id !== undefined ? options.id : undefined;\r\n        scope.dropdownId = options.id !== null && options.id !== undefined ? (options.id + '_dropdown') : undefined;\r\n        scope.keyboard = options.keyboard;\r\n        scope.focusOnOpen = options.focusOnOpen;\r\n\r\n        // labels\r\n        scope.$nextLabel = options.labelNext;\r\n        scope.$previousLabel = options.labelPrevious;\r\n\r\n        // This is the actual current picker view.\r\n        var $picker = $datepicker.$views[scope.$mode];\r\n\r\n        // Internal handlers\r\n\r\n        function handleOnKeyDown (evt, apply) {\r\n          if (!/(33|34|38|37|39|40|13)/.test(evt.keyCode) &&\r\n            !(/(33|34|38|37|39|40|13)/.test(evt.keyCode) && evt.shiftKey) &&\r\n            !(/(33|34|38|37|39|40|13)/.test(evt.keyCode) && evt.altKey)) {\r\n            return false;\r\n          }\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n\r\n          if (evt.keyCode === 13) {\r\n            if (!scope.$mode) {\r\n              $datepicker.hide(true);\r\n              if (options.focusOnOpen) return true;\r\n            } else {\r\n              if (apply === undefined || apply) {\r\n                scope.$apply(function () {\r\n                  $datepicker.setMode(scope.$mode - 1);\r\n                });\r\n              } else {\r\n                $datepicker.setMode(scope.$mode - 1);\r\n              }\r\n            }\r\n            return false;\r\n          }\r\n\r\n          return true;\r\n        }\r\n\r\n        // Scope methods\r\n\r\n        /**\r\n         * Pass through from the scope to the provider for the selection of a date.\r\n         */\r\n        scope.$select = function (date, disabled) {\r\n          if (disabled) return;\r\n          $datepicker.select(date);\r\n        };\r\n        scope.$selectPane = function (value) {\r\n          $datepicker.$selectPane(value);\r\n        };\r\n        scope.$toggleMode = function () {\r\n          $datepicker.setMode((scope.$mode + 1) % $datepicker.$views.length);\r\n        };\r\n        scope.$setToday = function () {\r\n          if (options.autoclose) {\r\n            $datepicker.setMode(0);\r\n            $datepicker.select(new Date());\r\n          } else {\r\n            $datepicker.select(new Date(), true);\r\n          }\r\n        };\r\n        scope.$clear = function () {\r\n          if (options.autoclose) {\r\n            $datepicker.setMode(0);\r\n            $datepicker.select(null);\r\n          } else {\r\n            $datepicker.select(null, true);\r\n          }\r\n        };\r\n        scope.$focused = function (dayInfo) {\r\n          scope.selectedDayId = dayInfo.id;\r\n          if (dayInfo.isNext && !scope.selected) {\r\n            if (scope.$mode) {\r\n              $datepicker.update(dayInfo.date);\r\n            } else {\r\n              scope.$select(dayInfo.date);\r\n            }\r\n          }\r\n        };\r\n        scope.$onKeyDown = function (evt, day) {\r\n          var continueHandling = handleOnKeyDown(evt, false);\r\n\r\n          if (continueHandling) {\r\n            // Navigate with keyboard\r\n            $picker.onKeyDown(evt);\r\n          }\r\n        };\r\n        scope.$onFocusOut = function (evt) {\r\n          // find out if the related target's parents contain the datepicker's $element\r\n          var inTable = false;\r\n          var parent = angular.element(evt.relatedTarget);\r\n          while (parent !== undefined && parent.length && parent[0] !== $window.document.body) {\r\n            parent = parent.parent();\r\n            if (parent !== undefined && parent[0] === $datepicker.$element[0]) {\r\n              inTable = true;\r\n              break;\r\n            } else {\r\n              inTable = false;\r\n            }\r\n          }\r\n\r\n          // In Chrome there is an issue when moving from month to month, year to year, etc.\r\n          //\r\n\r\n          if (!inTable && !evt.relatedTarget) {\r\n            // hmm\r\n          } else if (!inTable) {\r\n            $datepicker.hide();\r\n          } else {\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n          }\r\n        };\r\n\r\n        // Public methods\r\n\r\n        $datepicker.update = function (date) {\r\n          // console.warn('$datepicker.update() newValue=%o', date);\r\n          if (angular.isDate(date) && !isNaN(date.getTime())) {\r\n            $datepicker.$date = date;\r\n            $picker.update.call($picker, date);\r\n          }\r\n          // Build only if pristine\r\n          $datepicker.$build(true);\r\n        };\r\n\r\n        $datepicker.updateDisabledDates = function (dateRanges) {\r\n          options.disabledDateRanges = dateRanges;\r\n          for (var i = 0, l = scope.rows.length; i < l; i++) {\r\n            angular.forEach(scope.rows[i], $datepicker.$setDisabledEl);\r\n          }\r\n        };\r\n\r\n        $datepicker.select = function (date, keep) {\r\n          // console.warn('$datepicker.select', date, scope.$mode);\r\n          if (angular.isDate(date)) {\r\n            if (!angular.isDate(controller.$dateValue) || isNaN(controller.$dateValue.getTime())) {\r\n              controller.$dateValue = new Date(date);\r\n            }\r\n          } else {\r\n            controller.$dateValue = null;\r\n          }\r\n          if (!scope.$mode || keep) {\r\n            controller.$setViewValue(angular.copy(date));\r\n            controller.$render();\r\n            if (options.autoclose && !keep) {\r\n              $timeout(function () {\r\n                $datepicker.hide(true);\r\n              });\r\n            }\r\n          } else {\r\n            angular.extend(viewDate, {\r\n              year: date.getFullYear(),\r\n              month: date.getMonth(),\r\n              date: date.getDate()\r\n            });\r\n            $datepicker.setMode(scope.$mode - 1);\r\n            $datepicker.$build();\r\n          }\r\n        };\r\n\r\n        /**\r\n         * This changes the mode of the picker. By setting the mode the view for the picker will be\r\n         * rebuilt. The views are days, months, and years.\r\n         * @param {int} mode View mode for the datepicker. 0: day view, 1: month view, 2: year view.\r\n         */\r\n        $datepicker.setMode = function setMode (mode) {\r\n          scope.$mode = mode;\r\n          $picker = $datepicker.$views[scope.$mode];\r\n          // The picker has been changed so the view needs to be built.\r\n          $datepicker.$build();\r\n        };\r\n\r\n        // Protected methods\r\n\r\n        /**\r\n         * Builds the datepicker's view based on the picker that is currently set.\r\n         */\r\n        $datepicker.$build = function $build (pristine) {\r\n          // console.warn('$datepicker.$build() viewDate=%o', viewDate);\r\n          if (pristine === true && $picker.built) return;\r\n          if (pristine === false && !$picker.built) return;\r\n          $picker.build.call($picker);\r\n        };\r\n\r\n        $datepicker.$updateSelected = function () {\r\n          for (var i = 0, l = scope.rows.length; i < l; i++) {\r\n            angular.forEach(scope.rows[i], function (day) {\r\n              updateSelected(day);\r\n              if (day.selected) scope.selected = day;\r\n            });\r\n          }\r\n        };\r\n\r\n        $datepicker.$isSelected = function (date) {\r\n          return $picker.isSelected(date);\r\n        };\r\n\r\n        $datepicker.$setDisabledEl = function (el) {\r\n          el.disabled = $picker.isDisabled(el.date);\r\n        };\r\n\r\n        $datepicker.$selectPane = function (value) {\r\n          var steps = $picker.steps;\r\n          // set targetDate to first day of month to avoid problems with\r\n          // date values rollover. This assumes the viewDate does not\r\n          // depend on the day of the month\r\n          var targetDate = new Date(Date.UTC(viewDate.year + ((steps.year || 0) * value), viewDate.month + ((steps.month || 0) * value), 1));\r\n          angular.extend(viewDate, {\r\n            year: targetDate.getUTCFullYear(),\r\n            month: targetDate.getUTCMonth(),\r\n            date: targetDate.getUTCDate()\r\n          });\r\n          $datepicker.$build();\r\n        };\r\n\r\n        $datepicker.$onMouseDown = function (evt) {\r\n          // Prevent blur on mousedown on .dropdown-menu\r\n          evt.preventDefault();\r\n          evt.stopPropagation();\r\n          // Emulate click for mobile devices\r\n          if (isTouch) {\r\n            var targetEl = angular.element(evt.target);\r\n            if (targetEl[0].nodeName.toLowerCase() !== 'button') {\r\n              targetEl = targetEl.parent();\r\n            }\r\n            targetEl.triggerHandler('click');\r\n          }\r\n        };\r\n\r\n        /**\r\n         * Handles the onKeyDown event from the element that this datepicker is bound.\r\n         * In the standard case this will be an input element. If the trigger is set\r\n         * to click and is bound to a button then it is likely we're servicing a 508\r\n         * type situation where the implementation will no longer uses. Focus will be\r\n         * given to the table.\r\n         */\r\n        $datepicker.$onKeyDown = function (evt) {\r\n          var continueHandling = handleOnKeyDown(evt);\r\n\r\n          if (continueHandling) {\r\n            // Navigate with keyboard\r\n            $picker.onKeyDown(evt);\r\n            parentScope.$digest();\r\n          }\r\n        };\r\n\r\n        // $datepicker.$onFocusOut = function (evt) {\r\n        //   // find out if the related target's parents contain the datepicker's $element\r\n        //   var inTable = false;\r\n        //   var parent = angular.element(evt.relatedTarget);\r\n        //   while (parent !== undefined && parent.length && parent[0] !== $window.document.body) {\r\n        //     parent = parent.parent();\r\n        //     if (parent !== undefined && parent[0] === $datepicker.$element[0]) {\r\n        //       inTable = true;\r\n        //       break;\r\n        //     } else {\r\n        //       inTable = false;\r\n        //     }\r\n        //   }\r\n\r\n        //   // In Chrome there is an issue when moving from month to month, year to year, etc.\r\n        //   //\r\n\r\n        //   if (!inTable && !evt.relatedTarget) {\r\n        //     // hmm\r\n        //   } else if (!inTable) {\r\n        //     $datepicker.hide();\r\n        //   } else {\r\n        //     evt.stopPropagation();\r\n        //     evt.preventDefault();\r\n        //   }\r\n        // };\r\n\r\n        // Private\r\n\r\n        function updateSelected (el) {\r\n          el.selected = $datepicker.$isSelected(el.date);\r\n          el.focused = el.selected;\r\n        }\r\n\r\n        function focusElement () {\r\n          element[0].focus();\r\n        }\r\n\r\n        // Overrides\r\n\r\n        // The datepicker will override the init functionality of the tool\r\n        var _init = $datepicker.init;\r\n        /**\r\n         * Initialize the datepicker.\r\n         */\r\n        $datepicker.init = function () {\r\n          if (isNative && options.useNative) {\r\n            element.prop('type', 'date');\r\n            element.css('-webkit-appearance', 'textfield');\r\n            return;\r\n          } else if (isTouch) {\r\n            element.prop('type', 'text');\r\n            element.attr('readonly', 'true');\r\n            element.on('click', focusElement);\r\n          }\r\n          _init();\r\n        };\r\n\r\n        // The datepicker will override the destroy functionalty of the tooltip. Storing a ref to the\r\n        // tooltip's destroy function so that it can be invoked when the datepicker needs to be destroyed.\r\n        var _destroy = $datepicker.destroy;\r\n\r\n        /**\r\n         * Destroys the datepicker by removing bound events. Calls the destroy function on the tooltip.\r\n         */\r\n        $datepicker.destroy = function () {\r\n          if (isNative && options.useNative) {\r\n            element.off('click', focusElement);\r\n          }\r\n          _destroy();\r\n        };\r\n\r\n        // The datepicker will override the show functionality of the tooltip. Store a ref to the\r\n        // tooltip's show function so that it can be invoked at the appropriate time when the picker\r\n        // is to be shown.\r\n        var _show = $datepicker.show;\r\n\r\n        /**\r\n         * Override for the tooltip's show function.\r\n         *\r\n         * Checks the element for readonly or disabled before showing the \"tooltip\".\r\n         * Once shown it sets up the appropriate events.\r\n         */\r\n        $datepicker.show = function show () {\r\n          // If the input the directive is bound to is readonly or disabled then do not show a picker.\r\n          if ((!isTouch && element.attr('readonly')) || element.attr('disabled')) return;\r\n\r\n          // Call the \"overriden base\" function on the tooltip.\r\n          _show();\r\n\r\n          // use timeout to hookup the events to prevent\r\n          // event bubbling from being processed imediately.\r\n          $timeout(function () {\r\n            // if $datepicker is no longer showing, don't setup events\r\n            if (!$datepicker.$isShown) return;\r\n\r\n            // Update assistive technologies for view changes:\r\n            $datepicker.$element.attr('aria-hidden', 'false');\r\n            element.attr('aria-expanded', 'true');\r\n\r\n            // Setup the event mouse click event. TODO: Can this be wired up in the view?\r\n            $datepicker.$element.on(isTouch ? 'touchstart' : 'mousedown', $datepicker.$onMouseDown);\r\n\r\n            // If keyboard navigation is enabled (true by default).\r\n            if (options.keyboard) {\r\n              // $datepicker.$element.on('keydown', $datepicker.$onKeyDown);\r\n              // Check to see if the table element should receive the focus when the picker is shown.\r\n              if (options.focusOnOpen) {\r\n                // Focus the table element.\r\n                // $datepicker.$element.find('table')[0].focus();\r\n                // $datepicker.$element.on('focusout', $datepicker.$onFocusOut);\r\n              } else {\r\n                element.on('keydown', $datepicker.$onKeyDown);\r\n              }\r\n            }\r\n          }, 0, false);\r\n        };\r\n\r\n        // The datepicker will override the hide functionality of the tooltip. Store a ref to the\r\n        // tooltip's show function so that it can be invoked at the appropriate time when the picker\r\n        // is to be hidden.\r\n        var _hide = $datepicker.hide;\r\n\r\n        /**\r\n         * Overrid efor the tooltip's hide function.\r\n         *\r\n         * Updates attributes for assistive technologies and unbinds events.\r\n         */\r\n        $datepicker.hide = function (blur) {\r\n          // If the picker is already hidden don't do anything.\r\n          if (!$datepicker.$isShown) return;\r\n\r\n          // Update the attributes used by assisteive technologies\r\n          $datepicker.$element.attr('aria-hidden', 'true');\r\n          element.attr('aria-expanded', 'false');\r\n\r\n          // Unbind the mouse and touch events\r\n          $datepicker.$element.off(isTouch ? 'touchstart' : 'mousedown', $datepicker.$onMouseDown);\r\n\r\n          // If keyboard events were bound then unbind them.\r\n          if (options.keyboard) {\r\n            element.off('keydown', $datepicker.$onKeyDown);\r\n            $datepicker.$element.off('keydown', $datepicker.$onKeyDown);\r\n          }\r\n          if (options.focusOnOpen) {\r\n            // $datepicker.$element.off('focusout', $datepicker.$onFocusOut);\r\n            element[0].focus();\r\n          }\r\n          // Call the tooltip's hide function.\r\n          _hide(blur);\r\n        };\r\n\r\n        return $datepicker;\r\n      }\r\n\r\n      DatepickerFactory.defaults = defaults;\r\n      return DatepickerFactory;\r\n\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsDatepicker', function ($window, $parse, $q, $dateFormatter, $dateParser, $datepicker) {\r\n\r\n    // var defaults = $datepicker.defaults;\r\n    var isNative = /(ip[ao]d|iphone|android)/ig.test($window.navigator.userAgent);\r\n\r\n    return {\r\n      restrict: 'EAC',\r\n      require: 'ngModel',\r\n      link: function postLink (scope, element, attr, controller) {\r\n\r\n        // Directive options\r\n        var options = {\r\n          scope: scope\r\n        };\r\n        angular.forEach(['template', 'templateUrl', 'controller', 'controllerAs', 'placement', 'container', 'delay', 'trigger', 'html', 'animation', 'autoclose', 'dateType', 'dateFormat', 'timezone', 'modelDateFormat', 'dayFormat', 'strictFormat', 'startWeek', 'startDate', 'useNative', 'lang', 'startView', 'minView', 'iconLeft', 'iconRight', 'daysOfWeekDisabled', 'id', 'prefixClass', 'prefixEvent', 'hasToday', 'hasClear', 'focusOnOpen', 'labelNext', 'labelPrevious', 'labelMonth', 'labelYear', 'labelDays'], function (key) {\r\n          if (angular.isDefined(attr[key])) options[key] = attr[key];\r\n        });\r\n\r\n        // use string regex match boolean attr falsy values, leave truthy values be\r\n        var falseValueRegExp = /^(false|0|)$/i;\r\n        angular.forEach(['html', 'container', 'autoclose', 'useNative', 'hasToday', 'hasClear', 'focusOnOpen'], function (key) {\r\n          if (angular.isDefined(attr[key]) && falseValueRegExp.test(attr[key])) {\r\n            options[key] = false;\r\n          }\r\n        });\r\n\r\n        // bind functions from the attrs to the show and hide events\r\n        angular.forEach(['onBeforeShow', 'onShow', 'onBeforeHide', 'onHide'], function (key) {\r\n          var bsKey = 'bs' + key.charAt(0).toUpperCase() + key.slice(1);\r\n          if (angular.isDefined(attr[bsKey])) {\r\n            options[key] = scope.$eval(attr[bsKey]);\r\n          }\r\n        });\r\n\r\n        // Initialize datepicker\r\n        var datepicker = $datepicker(element, controller, options);\r\n        options = datepicker.$options;\r\n        // Set expected iOS format\r\n        if (isNative && options.useNative) options.dateFormat = 'yyyy-MM-dd';\r\n\r\n        var lang = options.lang;\r\n\r\n        var formatDate = function (date, format) {\r\n          return $dateFormatter.formatDate(date, format, lang);\r\n        };\r\n\r\n        var dateParser = $dateParser({\r\n          format: options.dateFormat,\r\n          lang: lang,\r\n          strict: options.strictFormat\r\n        });\r\n\r\n        // Visibility binding support\r\n        if (attr.bsShow) {\r\n          scope.$watch(attr.bsShow, function (newValue, oldValue) {\r\n            if (!datepicker || !angular.isDefined(newValue)) return;\r\n            if (angular.isString(newValue)) newValue = !!newValue.match(/true|,?(datepicker),?/i);\r\n            if (newValue === true) {\r\n              datepicker.show();\r\n            } else {\r\n              datepicker.hide();\r\n            }\r\n          });\r\n        }\r\n\r\n        // Observe attributes for changes\r\n        angular.forEach(['minDate', 'maxDate'], function (key) {\r\n          // console.warn('attr.$observe(%s)', key, attr[key]);\r\n          if (angular.isDefined(attr[key])) {\r\n            attr.$observe(key, function (newValue) {\r\n              // console.warn('attr.$observe(%s)=%o', key, newValue);\r\n              datepicker.$options[key] = dateParser.getDateForAttribute(key, newValue);\r\n              // Build only if dirty\r\n              if (!isNaN(datepicker.$options[key])) datepicker.$build(false);\r\n              validateAgainstMinMaxDate(controller.$dateValue);\r\n            });\r\n          }\r\n        });\r\n\r\n        // Observe date format\r\n        if (angular.isDefined(attr.dateFormat)) {\r\n          attr.$observe('dateFormat', function (newValue) {\r\n            datepicker.$options.dateFormat = newValue;\r\n          });\r\n        }\r\n\r\n        // Watch model for changes\r\n        scope.$watch(attr.ngModel, function (newValue, oldValue) {\r\n          datepicker.update(controller.$dateValue);\r\n        }, true);\r\n\r\n        // Normalize undefined/null/empty array,\r\n        // so that we don't treat changing from undefined->null as a change.\r\n        function normalizeDateRanges (ranges) {\r\n          if (!ranges || !ranges.length) return null;\r\n          return ranges;\r\n        }\r\n\r\n        if (angular.isDefined(attr.disabledDates)) {\r\n          scope.$watch(attr.disabledDates, function (disabledRanges, previousValue) {\r\n            disabledRanges = normalizeDateRanges(disabledRanges);\r\n            previousValue = normalizeDateRanges(previousValue);\r\n\r\n            if (disabledRanges) {\r\n              datepicker.updateDisabledDates(disabledRanges);\r\n            }\r\n          });\r\n        }\r\n\r\n        function validateAgainstMinMaxDate (parsedDate) {\r\n          if (!angular.isDate(parsedDate)) return;\r\n          var isMinValid = isNaN(datepicker.$options.minDate) || parsedDate.getTime() >= datepicker.$options.minDate;\r\n          var isMaxValid = isNaN(datepicker.$options.maxDate) || parsedDate.getTime() <= datepicker.$options.maxDate;\r\n          var isValid = isMinValid && isMaxValid;\r\n          controller.$setValidity('date', isValid);\r\n          controller.$setValidity('min', isMinValid);\r\n          controller.$setValidity('max', isMaxValid);\r\n          // Only update the model when we have a valid date\r\n          if (isValid) controller.$dateValue = parsedDate;\r\n        }\r\n\r\n        // viewValue -> $parsers -> modelValue\r\n        controller.$parsers.unshift(function (viewValue) {\r\n          // console.warn('$parser(\"%s\"): viewValue=%o', element.attr('ng-model'), viewValue);\r\n          var date;\r\n          // Null values should correctly reset the model value & validity\r\n          if (!viewValue) {\r\n            controller.$setValidity('date', true);\r\n            // BREAKING CHANGE:\r\n            // return null (not undefined) when input value is empty, so angularjs 1.3\r\n            // ngModelController can go ahead and run validators, like ngRequired\r\n            return null;\r\n          }\r\n          var parsedDate = dateParser.parse(viewValue, controller.$dateValue);\r\n          if (!parsedDate || isNaN(parsedDate.getTime())) {\r\n            controller.$setValidity('date', false);\r\n            // return undefined, causes ngModelController to\r\n            // invalidate model value\r\n            return;\r\n          }\r\n          validateAgainstMinMaxDate(parsedDate);\r\n\r\n          if (options.dateType === 'string') {\r\n            date = dateParser.timezoneOffsetAdjust(parsedDate, options.timezone, true);\r\n            return formatDate(date, options.modelDateFormat || options.dateFormat);\r\n          }\r\n          date = dateParser.timezoneOffsetAdjust(controller.$dateValue, options.timezone, true);\r\n          if (options.dateType === 'number') {\r\n            return date.getTime();\r\n          } else if (options.dateType === 'unix') {\r\n            return date.getTime() / 1000;\r\n          } else if (options.dateType === 'iso') {\r\n            return date.toISOString();\r\n          }\r\n          return new Date(date);\r\n        });\r\n\r\n        // modelValue -> $formatters -> viewValue\r\n        controller.$formatters.push(function (modelValue) {\r\n          // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\r\n          var date;\r\n          if (angular.isUndefined(modelValue) || modelValue === null) {\r\n            date = NaN;\r\n          } else if (angular.isDate(modelValue)) {\r\n            date = modelValue;\r\n          } else if (options.dateType === 'string') {\r\n            date = dateParser.parse(modelValue, null, options.modelDateFormat);\r\n          } else if (options.dateType === 'unix') {\r\n            date = new Date(modelValue * 1000);\r\n          } else {\r\n            date = new Date(modelValue);\r\n          }\r\n          // Setup default value?\r\n          // if (isNaN(date.getTime())) {\r\n          //   var today = new Date();\r\n          //   date = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0, 0);\r\n          // }\r\n          // do not adjust date if timezone is UTC\r\n          if (options.timezone === 'UTC') {\r\n            controller.$dateValue = date;\r\n          } else {\r\n            controller.$dateValue = dateParser.timezoneOffsetAdjust(date, options.timezone);\r\n          }\r\n          return getDateFormattedString();\r\n        });\r\n\r\n        // viewValue -> element\r\n        controller.$render = function () {\r\n          // console.warn('$render(\"%s\"): viewValue=%o', element.attr('ng-model'), controller.$viewValue);\r\n          element.val(getDateFormattedString());\r\n        };\r\n\r\n        function getDateFormattedString () {\r\n          return !controller.$dateValue || isNaN(controller.$dateValue.getTime()) ? '' : formatDate(controller.$dateValue, options.dateFormat);\r\n        }\r\n\r\n        // Garbage collection\r\n        scope.$on('$destroy', function () {\r\n          if (datepicker) datepicker.destroy();\r\n          options = null;\r\n          datepicker = null;\r\n        });\r\n\r\n      }\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsDatepickerDisplay', function ($datepicker, $dateParser, $dateFormatter) {\r\n    return {\r\n      require: 'ngModel',\r\n      link: function postLink (scope, element, attr, controller) {\r\n        // Directive options\r\n        var options = {\r\n          scope: scope\r\n        };\r\n        angular.forEach(['dateType', 'dateFormat', 'timezone', 'modelDateFormat', 'dayFormat', 'strictFormat', 'lang'], function (key) {\r\n          if (angular.isDefined(attr[key])) options[key] = attr[key];\r\n        });\r\n\r\n        options = angular.extend({}, $datepicker.defaults, options);\r\n\r\n        var lang = options.lang;\r\n\r\n        var formatDate = function (date, format) {\r\n          return $dateFormatter.formatDate(date, format, lang);\r\n        };\r\n\r\n        var dateParser = $dateParser({\r\n          format: options.dateFormat,\r\n          lang: lang,\r\n          strict: options.strictFormat\r\n        });\r\n\r\n        // Observe attributes for changes\r\n        angular.forEach(['minDate', 'maxDate'], function (key) {\r\n          if (angular.isDefined(attr[key])) {\r\n            attr.$observe(key, function (newValue) {\r\n              options[key] = dateParser.getDateForAttribute(key, newValue);\r\n              validateAgainstMinMaxDate(controller.$dateValue);\r\n            });\r\n          }\r\n        });\r\n\r\n        // Observe date format\r\n        if (angular.isDefined(attr.dateFormat)) {\r\n          attr.$observe('dateFormat', function (newValue) {\r\n            options.dateFormat = newValue;\r\n          });\r\n        }\r\n\r\n        function validateAgainstMinMaxDate (parsedDate) {\r\n          if (!angular.isDate(parsedDate)) return;\r\n          var isMinValid = isNaN(options.minDate) || parsedDate.getTime() >= options.minDate;\r\n          var isMaxValid = isNaN(options.maxDate) || parsedDate.getTime() <= options.maxDate;\r\n          var isValid = isMinValid && isMaxValid;\r\n          controller.$setValidity('date', isValid);\r\n          controller.$setValidity('min', isMinValid);\r\n          controller.$setValidity('max', isMaxValid);\r\n          // Only update the model when we have a valid date\r\n          if (isValid) controller.$dateValue = parsedDate;\r\n        }\r\n\r\n        // viewValue -> $parsers -> modelValue\r\n        controller.$parsers.unshift(function (viewValue) {\r\n          // console.warn('$parser(\"%s\"): viewValue=%o', element.attr('ng-model'), viewValue);\r\n          var date;\r\n          // Null values should correctly reset the model value & validity\r\n          if (!viewValue) {\r\n            controller.$setValidity('date', true);\r\n            // BREAKING CHANGE:\r\n            // return null (not undefined) when input value is empty, so angularjs 1.3\r\n            // ngModelController can go ahead and run validators, like ngRequired\r\n            return null;\r\n          }\r\n          var parsedDate = dateParser.parse(viewValue, controller.$dateValue);\r\n          if (!parsedDate || isNaN(parsedDate.getTime())) {\r\n            controller.$setValidity('date', false);\r\n            // return undefined, causes ngModelController to\r\n            // invalidate model value\r\n            return;\r\n          }\r\n          validateAgainstMinMaxDate(parsedDate);\r\n\r\n          if (options.dateType === 'string') {\r\n            date = dateParser.timezoneOffsetAdjust(parsedDate, options.timezone, true);\r\n            return formatDate(date, options.modelDateFormat || options.dateFormat);\r\n          }\r\n          date = dateParser.timezoneOffsetAdjust(controller.$dateValue, options.timezone, true);\r\n          if (options.dateType === 'number') {\r\n            return date.getTime();\r\n          } else if (options.dateType === 'unix') {\r\n            return date.getTime() / 1000;\r\n          } else if (options.dateType === 'iso') {\r\n            return date.toISOString();\r\n          }\r\n\r\n          return date === null ? null : new Date(date);\r\n        });\r\n\r\n        // modelValue -> $formatters -> viewValue\r\n        controller.$formatters.push(function (modelValue) {\r\n          // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\r\n          var date;\r\n          if (angular.isUndefined(modelValue) || modelValue === null) {\r\n            date = NaN;\r\n          } else if (angular.isDate(modelValue)) {\r\n            date = modelValue;\r\n          } else if (options.dateType === 'string') {\r\n            date = dateParser.parse(modelValue, null, options.modelDateFormat);\r\n          } else if (options.dateType === 'unix') {\r\n            date = new Date(modelValue * 1000);\r\n          } else {\r\n            date = new Date(modelValue);\r\n          }\r\n          // Setup default value?\r\n          // if (isNaN(date.getTime())) {\r\n          //   var today = new Date();\r\n          //   date = new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0, 0);\r\n          // }\r\n          // do not adjust date if timezone is UTC\r\n          if (options.timezone === 'UTC') {\r\n            controller.$dateValue = date;\r\n          } else {\r\n            controller.$dateValue = dateParser.timezoneOffsetAdjust(date, options.timezone);\r\n          }\r\n\r\n          return getDateFormattedString();\r\n        });\r\n\r\n        function getDateFormattedString () {\r\n          return !controller.$dateValue || isNaN(controller.$dateValue.getTime()) ? '' : formatDate(controller.$dateValue, options.dateFormat);\r\n        }\r\n      }\r\n    };\r\n  })\r\n\r\n  .provider('datepickerViews', function () {\r\n\r\n    // var defaults = this.defaults = {\r\n    //   dayFormat: 'dd',\r\n    //   daySplit: 7\r\n    // };\r\n\r\n    // Split array into smaller arrays\r\n    function split (arr, size) {\r\n      var arrays = [];\r\n      while (arr.length > 0) {\r\n        arrays.push(arr.splice(0, size));\r\n      }\r\n      return arrays;\r\n    }\r\n\r\n    // Modulus operator\r\n    function mod (n, m) {\r\n      return ((n % m) + m) % m;\r\n    }\r\n\r\n    this.$get = function ($dateFormatter, $dateParser, $sce) {\r\n\r\n      return function (picker) {\r\n\r\n        var scope = picker.$scope;\r\n        var options = picker.$options;\r\n\r\n        var lang = options.lang;\r\n        var formatDate = function (date, format) {\r\n          return $dateFormatter.formatDate(date, format, lang);\r\n        };\r\n        var dateParser = $dateParser({\r\n          format: options.dateFormat,\r\n          lang: lang,\r\n          strict: options.strictFormat\r\n        });\r\n\r\n        var weekDaysMin = $dateFormatter.weekdaysShort(lang);\r\n        var weekDaysLong = $dateFormatter.weekdays(lang);\r\n        var weekDaysShortLabels = weekDaysMin.slice(options.startWeek).concat(weekDaysMin.slice(0, options.startWeek));\r\n        var weekDaysLongLabels = weekDaysLong.slice(options.startWeek).concat(weekDaysMin.slice(0, options.startWeek));\r\n\r\n        var weekDaysLabelsHtml = '';\r\n        for (var i = 0; i < weekDaysShortLabels.length; i++) {\r\n          var weekDayShortLabel = weekDaysShortLabels[i];\r\n          var weekDayLabel = weekDaysLongLabels[i];\r\n          weekDaysLabelsHtml += '<th scope=\"col\" role=\"columnheader\" class=\"dow text-center\" aria-label=\"' + weekDayLabel + '\"><abbr title=\"' + weekDayLabel + '\">' + weekDayShortLabel + '</abbr></th>';\r\n        }\r\n        weekDaysLabelsHtml = $sce.trustAsHtml(weekDaysLabelsHtml);\r\n\r\n        var startDate = picker.$date || (options.startDate ? dateParser.getDateForAttribute('startDate', options.startDate) : new Date());\r\n        var viewDate = {\r\n          year: startDate.getFullYear(),\r\n          month: startDate.getMonth(),\r\n          date: startDate.getDate()\r\n        };\r\n\r\n        var views = [{\r\n          format: options.dayFormat,\r\n          split: 7,\r\n          steps: {\r\n            month: 1\r\n          },\r\n          update: function (date, force) {\r\n            if (!this.built || force || date.getFullYear() !== viewDate.year || date.getMonth() !== viewDate.month) {\r\n              angular.extend(viewDate, {\r\n                year: picker.$date.getFullYear(),\r\n                month: picker.$date.getMonth(),\r\n                date: picker.$date.getDate()\r\n              });\r\n              picker.$build();\r\n            } else if (date.getDate() !== viewDate.date || date.getDate() === 1) {\r\n              // chaging picker current month will cause viewDate.date to be set to first day of the month,\r\n              // in $datepicker.$selectPane, so picker would not update selected day display if\r\n              // user picks first day of the new month.\r\n              // As a workaround, we are always forcing update when picked date is first day of month.\r\n              viewDate.date = picker.$date.getDate();\r\n              picker.$updateSelected();\r\n            }\r\n          },\r\n          build: function () {\r\n            var firstDayOfMonth = new Date(viewDate.year, viewDate.month, 1);\r\n            var firstDayOfMonthOffset = firstDayOfMonth.getTimezoneOffset();\r\n            var firstDate = new Date(+firstDayOfMonth - mod(firstDayOfMonth.getDay() - options.startWeek, 7) * 864e5);\r\n            var firstDateOffset = firstDate.getTimezoneOffset();\r\n            var today = dateParser.timezoneOffsetAdjust(new Date(), options.timezone).toDateString();\r\n            // Handle daylight time switch\r\n            if (firstDateOffset !== firstDayOfMonthOffset) firstDate = new Date(+firstDate + (firstDateOffset - firstDayOfMonthOffset) * 60e3);\r\n            var days = [];\r\n            var day;\r\n            var selectedDay;\r\n            var todayDay;\r\n            for (var i = 0; i < 42; i++) { // < 7 * 6\r\n              day = dateParser.daylightSavingAdjust(new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate() + i));\r\n              // push the day information onto the collection\r\n              var dayItem = {\r\n                id: options.id !== null && options.id !== undefined ? (options.id + '_cell_' + i) : undefined,\r\n                date: day,\r\n                value: day.getDate(),\r\n                isToday: day.toDateString() === today,\r\n                label: formatDate(day, this.format),\r\n                screenReaderLabel: formatDate(day, $dateFormatter.getDatetimeFormat(options.screenReaderDateFormat)),\r\n                selected: picker.$date && this.isSelected(day),\r\n                muted: day.getMonth() !== viewDate.month,\r\n                disabled: this.isDisabled(day)\r\n              };\r\n\r\n              if (dayItem.selected) selectedDay = dayItem;\r\n              if (dayItem.isToday) todayDay = dayItem;\r\n\r\n              days.push(dayItem);\r\n            }\r\n\r\n            scope.selected = null;\r\n\r\n            var defaultFirstDayTabIndex = false;\r\n            // Setup the focusing\r\n            if (options.focusOnOpen) {\r\n              if (selectedDay) {\r\n                scope.selectedDayId = selectedDay.id;\r\n                if (todayDay) todayDay.focused = false;\r\n                // Needs to fire after the today focusing is unset in case the selected day is today.\r\n                selectedDay.focused = true;\r\n                scope.selected = selectedDay;\r\n              } else if (todayDay) {\r\n                todayDay.focused = true;\r\n              } else {\r\n                defaultFirstDayTabIndex = true;\r\n              }\r\n            }\r\n\r\n            scope.title = formatDate(firstDayOfMonth, options.monthTitleFormat);\r\n            scope.showLabels = true;\r\n            scope.labels = weekDaysLabelsHtml;\r\n            scope.rows = split(days, this.split);\r\n            if (defaultFirstDayTabIndex) {\r\n              scope.rows[0][0].isNext = true;\r\n            }\r\n            scope.isTodayDisabled = this.isDisabled(new Date());\r\n            scope.hasSelectedDate = picker.$date != null;\r\n            scope.$modeLabel = options.labelMonth;\r\n            this.built = true;\r\n          },\r\n          isSelected: function (date) {\r\n            return picker.$date && date.getFullYear() === picker.$date.getFullYear() &&\r\n              date.getMonth() === picker.$date.getMonth() &&\r\n              date.getDate() === picker.$date.getDate();\r\n          },\r\n          isDisabled: function (date) {\r\n            var time = date.getTime();\r\n\r\n            // Disabled because of min/max date.\r\n            if (time < options.minDate || time > options.maxDate) return true;\r\n\r\n            // Disabled due to being a disabled day of the week\r\n            if (options.daysOfWeekDisabled.indexOf(date.getDay()) !== -1) return true;\r\n\r\n            // Disabled because of disabled date range.\r\n            if (options.disabledDateRanges) {\r\n              for (var i = 0; i < options.disabledDateRanges.length; i++) {\r\n                if (time >= options.disabledDateRanges[i].start && time <= options.disabledDateRanges[i].end) {\r\n                  return true;\r\n                }\r\n              }\r\n            }\r\n\r\n            return false;\r\n          },\r\n          onKeyDown: function (evt) {\r\n            var actualTime;\r\n\r\n            // If the picker doesn't have a date selected and the event comes from the today TD\r\n            // then set the picker's $date to today and set the actual time to its value.\r\n            if (options.keyboard &&\r\n              options.focusOnOpen &&\r\n              !picker.$date) {\r\n              if (angular.element(evt.target).find('span').hasClass('btn-today')) {\r\n                picker.$date = new Date();\r\n              } else {\r\n                picker.$date = dateParser.parse(angular.element(evt.target).attr('aria-label'), null, options.screenReaderDateFormat);\r\n              }\r\n            }\r\n\r\n            if (!picker.$date) {\r\n              return false;\r\n            }\r\n\r\n            actualTime = picker.$date.getTime();\r\n\r\n            var newDate;\r\n\r\n            switch (evt.keyCode) {\r\n              // enter\r\n              case 13:\r\n                if (options.focusOnOpen) {\r\n                  picker.select(new Date(actualTime), true);\r\n                  return false;\r\n                }\r\n                break;\r\n                // pageup\r\n              case 33:\r\n                if (evt.altKey) { // move back a year\r\n                  newDate = new Date(picker.$date.getFullYear() - 1, picker.$date.getMonth(), picker.$date.getDate());\r\n                } else { // move back a month\r\n                  newDate = new Date(picker.$date.getFullYear(), picker.$date.getMonth() - 1, picker.$date.getDate());\r\n                  if (newDate.getMonth() > (picker.$date.getMonth() - 1)) {\r\n                    newDate = new Date(picker.$date.getFullYear(), picker.$date.getMonth(), 0);\r\n                  }\r\n                }\r\n                break;\r\n\r\n                // pagedown\r\n              case 34:\r\n                if (evt.altKey) { // move forward a year\r\n                  newDate = new Date(picker.$date.getFullYear() + 1, picker.$date.getMonth(), picker.$date.getDate());\r\n                } else { // move forward a month\r\n                  newDate = new Date(picker.$date.getFullYear(), picker.$date.getMonth() + 1, picker.$date.getDate());\r\n                  if (newDate.getMonth() > (picker.$date.getMonth() + 1)) {\r\n                    newDate = new Date(picker.$date.getFullYear(), picker.$date.getMonth() + 1, 1);\r\n                  }\r\n                }\r\n\r\n                break;\r\n\r\n                // left arrow\r\n              case 37:\r\n                newDate = new Date(actualTime - 1 * 864e5);\r\n                break;\r\n\r\n                // up arrow\r\n              case 38:\r\n                newDate = new Date(actualTime - 7 * 864e5);\r\n                break;\r\n\r\n                // right arrow\r\n              case 39:\r\n                newDate = new Date(actualTime + 1 * 864e5);\r\n                break;\r\n\r\n                // down arrow\r\n              case 40:\r\n                newDate = new Date(actualTime + 7 * 864e5);\r\n                break;\r\n\r\n              default:\r\n                return false;\r\n            }\r\n\r\n            if (!this.isDisabled(newDate)) picker.select(newDate, true);\r\n\r\n            if (evt && evt.stopPropagation) evt.stopPropagation();\r\n\r\n            return false;\r\n          }\r\n        }, {\r\n          name: 'month',\r\n          format: options.monthFormat,\r\n          split: 4,\r\n          steps: {\r\n            year: 1\r\n          },\r\n          update: function (date, force) {\r\n            if (!this.built || date.getFullYear() !== viewDate.year) {\r\n              angular.extend(viewDate, {\r\n                year: picker.$date.getFullYear(),\r\n                month: picker.$date.getMonth(),\r\n                date: picker.$date.getDate()\r\n              });\r\n              picker.$build();\r\n            } else if (date.getMonth() !== viewDate.month) {\r\n              angular.extend(viewDate, {\r\n                month: picker.$date.getMonth(),\r\n                date: picker.$date.getDate()\r\n              });\r\n              picker.$updateSelected();\r\n            }\r\n          },\r\n          build: function () {\r\n            // var firstMonth = new Date(viewDate.year, 0, 1);\r\n            var months = [];\r\n            var month;\r\n            var thisMonthDate = new Date((new Date()).getFullYear(), (new Date()).getMonth(), 1);\r\n            var selectedMonth;\r\n            var thisMonth;\r\n            for (var i = 0; i < 12; i++) {\r\n              month = new Date(viewDate.year, i, 1);\r\n\r\n              var monthItem = {\r\n                id: options.id !== null && options.id !== undefined ? (options.id + '_cell_' + i) : undefined,\r\n                date: month,\r\n                label: formatDate(month, this.format),\r\n                selected: picker.$isSelected(month),\r\n                isToday: month.getFullYear() === thisMonthDate.getFullYear() && month.getMonth() === thisMonthDate.getMonth(),\r\n                disabled: this.isDisabled(month)\r\n              };\r\n\r\n              if (monthItem.selected) selectedMonth = monthItem;\r\n              if (monthItem.isToday) thisMonth = monthItem;\r\n\r\n              months.push(monthItem);\r\n            }\r\n\r\n            scope.selected = null;\r\n\r\n            var defaultFirstDayTabIndex = false;\r\n            // Setup the focusing\r\n            if (options.focusOnOpen) {\r\n              if (selectedMonth) {\r\n                scope.selectedDayId = selectedMonth.id;\r\n                if (thisMonth) thisMonth.focused = false;\r\n                // Needs to fire after the today focusing is unset in case the selected day is today.\r\n                selectedMonth.focused = true;\r\n                scope.selected = selectedMonth;\r\n              } else if (thisMonth) {\r\n                thisMonth.focused = true;\r\n              } else {\r\n                defaultFirstDayTabIndex = true;\r\n              }\r\n            }\r\n\r\n            scope.title = formatDate(month, options.yearTitleFormat);\r\n            scope.showLabels = false;\r\n            scope.rows = split(months, this.split);\r\n            if (defaultFirstDayTabIndex) {\r\n              scope.rows[0][0].isNext = true;\r\n            }\r\n            scope.$modeLabel = options.labelYear;\r\n            this.built = true;\r\n          },\r\n          isSelected: function (date) {\r\n            return picker.$date && date.getFullYear() === picker.$date.getFullYear() && date.getMonth() === picker.$date.getMonth();\r\n          },\r\n          isDisabled: function (date) {\r\n            var lastDate = +new Date(date.getFullYear(), date.getMonth() + 1, 0);\r\n            return lastDate < options.minDate || date.getTime() > options.maxDate;\r\n          },\r\n          onKeyDown: function (evt) {\r\n            // If the picker doesn't have a date selected and the event comes from the today TD\r\n            // then set the picker's $date to today and set the actual time to its value.\r\n            if (options.keyboard &&\r\n              options.focusOnOpen &&\r\n              !picker.$date &&\r\n              angular.element(evt.target).find('span').hasClass('btn-today')) {\r\n              picker.$date = new Date((new Date()).getFullYear(), (new Date()).getMonth(), 1);\r\n            }\r\n\r\n            if (!picker.$date) {\r\n              return;\r\n            }\r\n            var actualMonth = picker.$date.getMonth();\r\n            var newDate = new Date(picker.$date);\r\n\r\n            if (evt.keyCode === 37) newDate.setMonth(actualMonth - 1);\r\n            else if (evt.keyCode === 38) newDate.setMonth(actualMonth - 4);\r\n            else if (evt.keyCode === 39) newDate.setMonth(actualMonth + 1);\r\n            else if (evt.keyCode === 40) newDate.setMonth(actualMonth + 4);\r\n\r\n            if (options.focusOnOpen && evt.keyCode === 13) picker.select(new Date(picker.$date));\r\n            else if (!this.isDisabled(newDate)) picker.select(newDate, true);\r\n          }\r\n        }, {\r\n          name: 'year',\r\n          format: options.yearFormat,\r\n          split: 4,\r\n          steps: {\r\n            year: 12\r\n          },\r\n          update: function (date, force) {\r\n            if (!this.built || force || parseInt(date.getFullYear() / 20, 10) !== parseInt(viewDate.year / 20, 10)) {\r\n              angular.extend(viewDate, {\r\n                year: picker.$date.getFullYear(),\r\n                month: picker.$date.getMonth(),\r\n                date: picker.$date.getDate()\r\n              });\r\n              picker.$build();\r\n            } else if (date.getFullYear() !== viewDate.year) {\r\n              angular.extend(viewDate, {\r\n                year: picker.$date.getFullYear(),\r\n                month: picker.$date.getMonth(),\r\n                date: picker.$date.getDate()\r\n              });\r\n              picker.$updateSelected();\r\n            }\r\n          },\r\n          build: function () {\r\n            var firstYear = viewDate.year - viewDate.year % (this.split * 3);\r\n            var years = [];\r\n            var year;\r\n            var selectedYear;\r\n            var thisYear;\r\n            for (var i = 0; i < 12; i++) {\r\n              year = new Date(firstYear + i, 0, 1);\r\n\r\n              var yearItem = {\r\n                id: options.id !== null && options.id !== undefined ? (options.id + '_cell_' + i) : undefined,\r\n                date: year,\r\n                label: formatDate(year, this.format),\r\n                selected: picker.$isSelected(year),\r\n                isToday: year.getFullYear() === (new Date()).getFullYear(),\r\n                disabled: this.isDisabled(year)\r\n              };\r\n\r\n              if (yearItem.selected) selectedYear = yearItem;\r\n              if (yearItem.isToday) thisYear = yearItem;\r\n\r\n              years.push(yearItem);\r\n            }\r\n\r\n            scope.selected = null;\r\n\r\n            var defaultFirstDayTabIndex = false;\r\n            // Setup the focusing\r\n            if (options.focusOnOpen) {\r\n              if (selectedYear) {\r\n                scope.selectedDayId = selectedYear.id;\r\n                if (thisYear) thisYear.focused = false;\r\n                // Needs to fire after the today focusing is unset in case the selected day is today.\r\n                selectedYear.focused = true;\r\n                scope.selected = selectedYear;\r\n              } else if (thisYear) {\r\n                thisYear.focused = true;\r\n              } else {\r\n                defaultFirstDayTabIndex = true;\r\n              }\r\n            }\r\n\r\n            scope.title = years[0].label + '-' + years[years.length - 1].label;\r\n            scope.startYear = years[0].label;\r\n            scope.endYear = years[years.length - 1].label;\r\n            scope.showLabels = false;\r\n            scope.rows = split(years, this.split);\r\n            if (defaultFirstDayTabIndex) {\r\n              scope.rows[0][0].isNext = true;\r\n            }\r\n            scope.$modelLabel = options.labelDays;\r\n            this.built = true;\r\n          },\r\n          isSelected: function (date) {\r\n            return picker.$date && date.getFullYear() === picker.$date.getFullYear();\r\n          },\r\n          isDisabled: function (date) {\r\n            var lastDate = +new Date(date.getFullYear() + 1, 0, 0);\r\n            return lastDate < options.minDate || date.getTime() > options.maxDate;\r\n          },\r\n          onKeyDown: function (evt) {\r\n            // If the picker doesn't have a date selected and the event comes from the today TD\r\n            // then set the picker's $date to today and set the actual time to its value.\r\n            if (options.keyboard &&\r\n              options.focusOnOpen &&\r\n              !picker.$date &&\r\n              angular.element(evt.target).find('span').hasClass('btn-today')) {\r\n              picker.$date = new Date((new Date()).getFullYear(), 0, 1);\r\n            }\r\n\r\n            if (!picker.$date) {\r\n              return;\r\n            }\r\n            var actualYear = picker.$date.getFullYear();\r\n            var newDate = new Date(picker.$date);\r\n\r\n            if (evt.keyCode === 37) newDate.setYear(actualYear - 1);\r\n            else if (evt.keyCode === 38) newDate.setYear(actualYear - 4);\r\n            else if (evt.keyCode === 39) newDate.setYear(actualYear + 1);\r\n            else if (evt.keyCode === 40) newDate.setYear(actualYear + 4);\r\n\r\n            if (!this.isDisabled(newDate)) picker.select(newDate, true);\r\n          }\r\n        }];\r\n\r\n        return {\r\n          views: options.minView ? Array.prototype.slice.call(views, options.minView) : views,\r\n          viewDate: viewDate\r\n        };\r\n\r\n      };\r\n\r\n    };\r\n\r\n  });\r\n"]}