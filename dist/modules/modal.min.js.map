{"version":3,"sources":["modules/modal.js"],"names":["angular","placement","provider","templateUrl","this","defaults","template","contentTemplate","container","element","backdrop","keyboard","html","show","size","zIndex","containerElement","$get","forEach","requestAnimationFrame","bodyElement","layoutHideElement","backdropCount","backdropBaseZindex","$window","$rootScope","$bsCompiler","$animate","$timeout","$sce","dimensions","ModalFactory","config","focusableElement","scope","attr","$modal","setTimeout","options","onShow","isFunction","modalElement","findElement","unbindKeyboardEvents","focus","$emit","prefixEvent","animation","onHide","removeClass","length","findFocusableElements","focusableElements","focusable","offsetWidth","prefixClass","offsetHeight","document","findNextFocusableElement","activeElement","filter","call","querySelectorAll","inReverse","index","undefined","toggle","$isShown","prototype","reverse","indexOf","unbindBackdropEvents","off","hideOnBackdropClick","backdropElement","preventEventDefault","bindKeyboardEvents","on","$onKeyDown","evt","preventDefault","modalScope","$destroy","$element","extend","promise","$promise","compile","$new","dialogBaseZindex","id","returnFocus","parseInt","hide","key","$show","trustAsHtml","$$postDigest","left","bottom","right","css","compileData","init","data","destroy","destroyModalElement","parent","after","isElement","$scope","z-index","link","clonedElement","isDefined","onBeforeShow","display","defaultPrevented","addClass","customClass","validSizes","enter","minor","backdropAnimation","el","enterAnimateCallback","then","safeDigest","bindBackdropEvents","onBeforeHide","leave","leaveAnimateCallback","which","stopPropagation","$onKeyUp","keyCode","nextFocusable","shiftKey","directive","$root","$$phase","$digest","restrict","query","lg","sm","body","$options","falseValueRegExp","test","bsKey","modalClass","$observe","charAt","newValue","oldValue","$eval","$watch","isObject","bsModal","modal","content","trigger","$on"],"mappings":"AAOA,YAEAA,SAGMC,OAAW,wBAAA,sBAAA,sCAAAC,SAAA,SAAA,WAFf,GAGIC,GAAaC,KAAAC,UACbC,UAAU,UACVC,kBAAiB,UACjBC,YAAW,GACXC,YAAS,QACTC,YAAU,QACVC,UAAU,MACVC,YAAM,uBACNC,SAAM,GACNC,iBAAM,EACNC,WAAQ,EACRC,QAAAA,KAFFN,UAAU,EAKVN,UAAKa,EAEHL,MAAIM,EACJL,MAAIM,EACJL,KAAIM,KAEJL,OAAIM,KAEJL,iBAAIM,KALRlB,MAOIa,MAAIM,UAAAA,aAAqB,cAAA,WAAA,WAAA,OAAA,aAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAK3B,QAASC,GAAaC,GAyIpB,QA6EQC,KA5ENC,EA6EID,MAAAA,EAAiBE,YAAK,QAAYC,GAClCC,QAAAA,UAAWC,EAAAC,SAAAvC,QAAAwC,WAAAF,EAAAC,SA5EbD,EA6EIL,OAAAA,GA3ENQ,EA6EQN,KAAA,cAAA,QA5ER,IA6EHd,GAAkBc,QAAK1B,QAAAiC,EAAe,UACtCC,GAAAA,OAAAA,GA5EKV,EAAiBE,KAAK,WAAY,KAClCE,WAAW,WA+EbD,EAAcQ,SACPR,OAGHf,EAAAc,KAAA,cAAA,SA9EFQ,KA2BJ,QAyFMtB,KAxFJa,EAAMW,MAAMP,EAAQQ,YAAc,QAASV,GA0FrCE,QAAQS,UAAAA,EAAWC,SAAAhD,QAAAwC,WAAAF,EAAAU,SACrB5B,EAAAA,OAAY6B,GAvFZP,EAAY,UAAUQ,QAAU,IA2FpC9B,EAAS+B,YAAAA,EAAAA,YAAAA,SAEP9B,EAAI+B,KAAoB,cAAA,UAEtBd,EAAIe,WA1FNjC,EA6FaX,YAAQ6C,EAAcC,YAAaC,SAAAA,EAAoB/C,WA1FxE,QAAS0C,KACP,GAAIC,GAAoB,mHAgGxB,IAAAK,SAASC,cAAAA,CACP,GAAID,GAASE,MAAAA,UAAeC,OAAAC,KAAApB,EAAA,GAAAqB,iBAAAV,GAAA,SAAA3C,GAC1B,MAAI4C,GAAYF,YAAAA,GAAAA,EAAAA,aAAAA,GAAAA,IAAAA,SAAAA,eAEhB,OAAIY,IA5FV,QAgGUC,GAA0BP,GA/FlC,GAgGIA,SAAOJ,cAAkB,CA/F3B,GAAIA,GAAYF,GAChB,IAAkBc,SAAdZ,EAAyB,MAkGxBa,KACD9B,EAAO+B,MAAUC,UAAAC,QAAAR,KAAAR,GA/FrB,IAAIW,GAiGGX,EAAAiB,QAAAb,SAAAE,cACLvB,OAAOvB,GAAAA,EAAAA,IAqDX,QAAS0D,KACHjC,EAAQ5B,WACV+B,EAAa+B,GAAAA,QAAIC,GACjBC,EAAgBF,GAAAA,QAAIC,GACpBC,EAAgBF,GAAAA,QAAIG,IAIxB,QAASC,KACHtC,EAAQ3B,WACV8B,EAAaoC,IAAG,QAASzC,GACzBK,EAAgB+B,IAAA,QAAWpC,GA7G7BsC,EAAgBF,IAAI,QAASG,IAGjC,QA+GQrC,KACFG,EAAAA,WACAA,EAAa+B,GAAAA,QAAIpC,EAAWA,UA9G9BK,EAAaoC,GAAG,UAAWzC,EAAO0C,aAGtC,QAkHQC,KACAzC,EAAQ5B,WACV0B,EAAOQ,IAAAA,QAAAA,EAAAA,UAjHTH,EAkHO+B,IAAA,UAAApC,EAAA0C,aA/GX,QAASL,GAAoBM,GAoH3BA,EAASJ,SAAAA,EAAAA,gBACHK,WAAAA,EAAAA,SAlHJ5C,EAAOQ,QAsHPR,EAAIA,QAjHR,QAASuC,GAAoBI,GAuHzBA,EAAIE,iBApHR,QAsHMA,KArHA7C,EAAO+B,UAA6B,OAAjB1B,IAwHrB8B,IACE9B,KArHAwC,IACFA,EAAWC,WAyHbD,EAAO7C,MAMTK,IAEEP,EAAkBA,SA5HhBO,EAAeL,EAAO+C,SAAW,MA1RnC,GAAA/C,MACEE,EAAQ9B,EAAAA,SAAYR,QAAAoF,UAAA/E,EAAA2B,GAbpBqD,EAAUjD,EAAOkD,SAAW5D,EAAY6D,QAAQjD,GAgB9CA,EAAQvB,EAAAA,OAAQuB,EAAAJ,OAAAI,EAAAJ,MAAAsD,QAAA/D,EAAA+D,MAClBC,GAAAA,mBACAlE,EAAAA,QAAqBkE,QAAAA,EAAmBzE,mBAM1CoB,EAAaE,SAAQoD,EAAMpD,YAE3BF,EAAOuD,UAAc,QAMnBrD,EAAIA,SAvBNmD,EAAmBG,SAAStD,EAAQvB,OAAQ,IA2B5CmB,EAAcuD,EAAA,IAxBhBrD,EA0BMA,IAAOyD,EAAAA,IAAAA,EAAAA,SAAAA,EAAAA,QAAAA,KAAAA,OAAAA,GAzBbzD,EAAOuD,YAAc,aACrBzE,GAAU,QAAS,WAAa,SAAS4E,GA2BjCC,EAAQD,KAAA5D,EAAA4D,GAAAjE,EAAAmE,YAAA1D,EAAAwD,OAxBhB5D,EA0BME,MAAOvB,WAzBXqB,EAAM+D,aAAa,WACjB7D,EAAOyD,UAGX3D,EA0BME,MAAO8B,WAzBXhC,EAAM+D,aAAa,WACjB7D,EAAOvB,UAgCTqB,EAAIO,QAAAA,WACJP,EAAI+C,aAAAA,WACAP,EAAAA,YA1BNtC,EA6BS+B,SAAAjC,EAAAiC,UAAA,CA5BT,IA6BI+B,GACAC,EACAC,EA5BA1B,EAAkB1E,QAAQS,QAAQ,eAAiB6B,EAAQiB,YAAc,eAqQ7E,OAvOE8B,GAAagB,KACXC,SAAAA,QACAlE,IAAAA,MA5BF8D,KAAM,MA+BN9D,OAAOmE,MAGLH,MAAI9D,QA9BR+C,EAgCQjD,KAAOvB,SAAAA,GA/BbyF,EAAcE,EACdpE,EAAOmE,SAoCPnE,EAAOqE,KAAAA,WAGLC,EAAAA,MAGAxE,EAAIwC,aAAiB,WACnBA,EAAAA,UAlCNtC,EAAOqE,QAAU,WA0CfrE,IACMA,IAEJsC,EAAIiC,SACJjC,EAAIkC,MAxCN1E,EA0CIyE,YAxCNvE,EAAOvB,KA0CI,WAzCT,IA0CIuB,EAAIE,SA1CR,CACA,GA0CMqE,GACAC,CAjBN,IAxBI5G,QA0CO6G,UAAAvE,EAAA9B,YAzCTmG,EA0CIA,EAASnG,UAzCboG,EA0CIA,EAAQtE,UAAQ7B,GAAAA,UAAAA,QAAAA,QAAAA,EAAAA,UAAAA,GAAAA,WAAAA,MAxChB6B,EAAQ9B,WA6CRiC,EAAAA,EAAciE,EAAAA,WAIlBzB,EAAAA,EAAa7C,IAAO0E,EAAOtB,GAAAA,UAAAA,QAAAA,QAAAA,EAAAA,GAAAA,WAAAA,OAIvBlD,EAAQ5B,KAEV+B,EAAAA,EAAa4D,SAGb3B,GAAgB2B,IAjDpBpB,EAkDM8B,EAAWxF,OAAAA,OAjDjBkB,EAAeL,EAAO+C,SAAWmB,EAAYU,KAAK/B,EAAY,SAASgC,EAAe/E,MAqDlFZ,EAAAA,WAnDFmB,EAAa4D,KAsDTnE,UAAMW,EAA4B,GAAdC,IAnDxB4B,EAAgB2B,KAsDZrG,UAAQkH,EAAmClH,GAAjBmH,IAnD9B7F,MAyDE8F,EAAAA,MAAS9E,EAAAQ,YAAA,eAAAV,GAAAiF,iBAvDb,CA4DI5E,QAAAA,UAAa6E,EAAShF,eAAQiF,QAAAA,WAAAA,EAAAA,eAxDhCjF,EAAQ6E,aAAa/E,GAEvBK,EA2DYhC,KA1DV2G,QAAS,UA8DTE,SAAYvE,EAAAA,WACVT,EAAIA,aA5DNG,EA6DIiC,SAAgB4C,EAAShF,aAE3BG,EAAAA,MAAa6E,EAAShF,EAAQS,OA5DhC/C,QAAQS,QAAQiC,EAAY,gBAAiBD,EAAa,KAAK6E,SAASE,EAAWlF,EAAQxB,OAgEzFa,EAAS8F,YA7DPnF,EAAQ5B,UAkERV,EAAgB0H,SAASpF,EAAGqF,mBA/DhClF,EAiEO6E,SAAAhF,EAAAS,YA/DLT,EAAQ5B,UAmEV0B,EAAO+B,MAAAA,EAAiBA,EAAW,MAI/ByD,QAAKnF,QAAAA,OAAa,EACtBtB,EAAAA,MAAAA,EAAsBwF,EAAAC,EAAAiB,GAlEtBlG,EAAS8F,MAAMhF,EAAckE,EAAQC,GAAOkB,KAAKD,GAwEjDxG,EAAAA,SAAkBc,EAAKgC,UAAA,EAEvB4D,EAAIzF,EAtEN,IAuEIlB,GAAAA,EAAYkG,EAtEhBnG,GAAsB,WA0EpB6G,EAAAA,UAvEF5G,EAAYkG,SAAShF,EAAQiB,YAAc,SA2E3ClC,EAASwG,KAAAA,cAAAA,QACP3F,EAAYI,WACZlB,EAAY8F,SAAU5E,EAAQC,YAAWvC,SAAQwC,EAAWF,WAxE9D0F,IA4EEvF,OAxDJL,EAAOyD,KAAO,WAiFVpD,EAAAA,WAEIL,EAAAA,MAAOuD,EAAAA,YAAsBvD,eAAOuD,GAAgB0B,mBA9EtDrH,QAoFKkH,UAAA5E,EAAA2F,eAAAjI,QAAAwC,WAAAF,EAAA2F,eACLtG,EAAAA,aAAec,GAGjBA,EAAY/B,KAAAA,cAAU,QAEpBY,EAAAA,aAAAA,kBAAAA,GAAAA,aAAAA,EAAAA,cACAK,QAASuG,QAAMxD,OAAAA,EArFjB/C,EAASuG,MAAMzF,EAAc0F,GAwF7BJ,EAAW7F,MAAAA,GAAAA,KAAAA,GAIXS,EAAAA,WAvFArB,IA0FFK,EAASwG,MAAAA,IAEP/F,EAAIpC,SAAQkH,EAAU5E,UAAQU,EAxFhC+E,EAyFY/E,GAxFZuB,IA0FE5B,OA4CFP,EAAOQ,OAAQ,WACbH,EAAAA,SAjGAL,EAAOyD,OAyGPzD,EAASgG,QApGbhG,EAAOQ,MAAQ,WACbH,EAuGQ4F,GAAAA,SArGVjG,EAAOkG,SAAW,SAASvD,GAyGL,IAAbD,EAAAA,OAAuBC,KAAVA,EAAUA,QAAAA,EAAAA,WAChBpE,KAAR2B,EAAAA,OACFF,EAAQmG,OAtGVxD,EAAIsD,oBAGRjG,EA0GQ0C,WAAI0D,SAAkBvE,GAzG5B,GAAI3B,EA0GQyC,WACIsD,IAARtD,EAAIA,SAAyBsD,aAArBA,EAAiBtD,OAAIsD,SAAAA,UAAAA,EAAAA,OAAAA,SAzGjCtD,EA2GIC,iBAEY3B,IA3Gd0B,EA2GI1B,SAAUA,CA1GhB,GAAImF,GA2GO9E,EAAAqB,EAAA0D,SA1GX,IA2GmB7F,SAAbS,EAAaT,CA1GbmC,EAAIC,gBAAgBD,EAAIC,iBACxBD,EAAIsD,iBAAiBtD,EAAIsD,iBAC7B,IAAIhF,GAAYF,GACZ4B,GAAI0D,SACNpF,EAAUA,EAAUH,OAAS,GAAGN,QA8GlCN,EAAQ5B,GAAAA,WAnDT0B,EAET,QAAS2F,GAAW7F,GAqIrBwG,EAAAA,SAAUxG,EAAAyG,OAAAzG,EAAAyG,MAAAC,SAAA1G,EAAW2G,UAGlBC,QAAAA,GAAUC,EAAAtI,GACVyB,MAAOlC,SAAAS,SAAAA,GAAAgD,UAAAK,iBAAAiF,IA1bP,GAAIvB,GAAAA,QAAAA,QACFwB,EAAIxH,EAAAL,uBAAAK,EAAAa,WACJ4G,EAAIjJ,QAAAS,QAAAe,EAAAiC,SAAAyF,MAPJ7H,EAAoBrB,QAAQS,QAAQ,oBAUtCa,EAASS,EAEP0D,EAAIrD,KAGJb,EAAqB4H,KAErB3B,GACAwB,GAAI9G,WAEJ+G,GAAI3G,WAwSR,OAuIQA,OArIToG,UAuIOjI,WAASA,UAAAA,OAAAA,SAAAA,SAAAA,SAAAA,EAAAA,EAAAA,EAAAA,GAtIjB,OACEqI,SAAU,MACV5G,OAuIIlC,EAtIJgH,KAuIM,SAAYE,EAAepB,EAAOxD,EAAQwD,GAtI9C,GAAIxD,IA0IFJ,MAAII,EACFA,QAAQiF,EAxIV1G,MAAM,EA6INb,SAAQkB,SAAS,WAAY,cAAY,aAAQ,eAAwB4E,kBAAAA,YAAAA,WAAAA,WAAAA,OAAAA,YAAAA,YAAAA,oBAAAA,KAAAA,cAAAA,cAAAA,cAAAA,aAAAA,OAAAA,UAAAA,SAAAA,GACnE9F,QAAQkH,UAAU/E,EAAK2D,MAAAA,EAASsD,GAAAA,EAAiBC,MAIvDrJ,EAAQkB,aACNoB,EAAIgH,YAAexD,EAAWyD,WA3IlC,IA6IMjH,GAAeJ,eA5IrBlC,SAAQkB,SAAU,WAAY,WAAY,OAAQ,aAAe,SAAS4E,GACpE9F,QAAQkH,UAAU/E,EAAK2D,KAASsD,EAAiBC,KAAKlH,EAAK2D,MAAOxD,EAAQwD,IAAO,KAEvF9F,QA+IQmC,SAAW,eAAA,SAAA,eAAA,UAAA,SAAA2D,GA9IjB,GA+II3D,GAAKqH,KAAS1D,EAAK2D,OAAUC,GAAAA,cAAUC,EAAAA,MAAAA,EACrCzH,SAAM4D,UAAYE,EAAAA,MA9ItB1D,EAAQwD,GAAO5D,EAAM0H,MAAMzH,EAAKmH,OAoJlCtJ,QAAImC,SAAc,QAAA,WAAA,SAAA2D,GAChB5D,EAAM2H,IACJ1H,EAAInC,SAAQ8J,EAAAA,SAASJ,EAAWC,GAC9B3J,EAAAA,GAAQoF,EAAOlD,YAAOwH,OA7I1BvH,EAiJG4H,SAhJL7H,EAAM2H,OAAO1H,EAAK4H,QAAS,SAASL,EAAUC,GAoJ1CK,QAAQ5H,SAAOE,GAEfA,QAAQ3B,OAAAA,EAAU+I,GAElBjJ,EAAQwJ,QAAGrH,IAlJZ,EA0JHV,IAAAA,GAAUE,EAAAE,EACRA,GAAI0H,WACJ1H,EAAAA,YAAU,WACV0H,EAAQ,GAAApH,UArJZnC,EAAQoE,GAAG1C,EAAK+H,SAAW,QAASF,EAAM9F,QAC1ChC,EAAMiI,IAAI,WAAY,WAChBH,GAAOA,EAAMvD,UACjBnE,EAAU,KACV0H,EAAQ","file":"modules/modal.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.modal', ['mgcrea.ngStrap.core', 'mgcrea.ngStrap.helpers.dimensions'])\r\n\r\n  .provider('$modal', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      backdropAnimation: 'am-fade',\r\n      customClass: '',\r\n      prefixClass: 'modal',\r\n      prefixEvent: 'modal',\r\n      placement: 'top',\r\n      templateUrl: 'modal/modal.tpl.html',\r\n      template: '',\r\n      contentTemplate: false,\r\n      container: false,\r\n      element: null,\r\n      backdrop: true,\r\n      keyboard: true,\r\n      html: false,\r\n      show: true,\r\n      size: null,\r\n      zIndex: null,\r\n      containerElement: null\r\n    };\r\n\r\n    this.$get = function ($window, $rootScope, $bsCompiler, $animate, $timeout, $sce, dimensions) {\r\n\r\n      var forEach = angular.forEach;\r\n      var requestAnimationFrame = $window.requestAnimationFrame || $window.setTimeout;\r\n      var bodyElement = angular.element($window.document.body);\r\n\r\n      var layoutHideElement = angular.element('#layoutContainer');\r\n\r\n      var backdropCount = 0;\r\n      var dialogBaseZindex = 1050;\r\n      var backdropBaseZindex = 1040;\r\n\r\n      var validSizes = {\r\n        lg: 'modal-lg',\r\n        sm: 'modal-sm'\r\n      };\r\n\r\n      function ModalFactory (config) {\r\n\r\n        var $modal = {};\r\n\r\n        // Common vars\r\n        var options = $modal.$options = angular.extend({}, defaults, config);\r\n\r\n        var promise = $modal.$promise = $bsCompiler.compile(options);\r\n        var scope = $modal.$scope = options.scope && options.scope.$new() || $rootScope.$new();\r\n\r\n        if (options.containerElement) {\r\n          layoutHideElement = angular.element(options.containerElement);\r\n        }\r\n        if (!options.element && !options.container) {\r\n          options.container = 'body';\r\n        }\r\n\r\n        if (options.zIndex) {\r\n          dialogBaseZindex = parseInt(options.zIndex, 10);\r\n          backdropBaseZindex = dialogBaseZindex - 10;\r\n        }\r\n\r\n        // Store $id to identify the triggering element in events\r\n        // give priority to options.id, otherwise, try to use\r\n        // element id if defined\r\n        $modal.$id = options.id || options.element && options.element.attr('id') || '';\r\n\r\n        $modal.returnFocus = function () {\r\n\r\n        };\r\n\r\n        // Support scope as string options\r\n        forEach(['title', 'content'], function (key) {\r\n          if (options[key]) scope[key] = $sce.trustAsHtml(options[key]);\r\n        });\r\n\r\n        // Provide scope helpers\r\n        scope.$hide = function () {\r\n          scope.$$postDigest(function () {\r\n            $modal.hide();\r\n          });\r\n        };\r\n        scope.$show = function () {\r\n          scope.$$postDigest(function () {\r\n            $modal.show();\r\n          });\r\n        };\r\n        scope.$toggle = function () {\r\n          scope.$$postDigest(function () {\r\n            $modal.toggle();\r\n          });\r\n        };\r\n        // Publish isShown as a protected var on scope\r\n        $modal.$isShown = scope.$isShown = false;\r\n\r\n        // Fetch, compile then initialize modal\r\n        var compileData;\r\n        var modalElement;\r\n        var modalScope;\r\n        var backdropElement = angular.element('<div class=\"' + options.prefixClass + '-backdrop\"/>');\r\n        backdropElement.css({\r\n          position: 'fixed',\r\n          top: '0px',\r\n          left: '0px',\r\n          bottom: '0px',\r\n          right: '0px'\r\n        });\r\n        promise.then(function (data) {\r\n          compileData = data;\r\n          $modal.init();\r\n        });\r\n\r\n        $modal.init = function () {\r\n\r\n          // Options: show\r\n          if (options.show) {\r\n            scope.$$postDigest(function () {\r\n              $modal.show();\r\n            });\r\n          }\r\n\r\n        };\r\n\r\n        $modal.destroy = function () {\r\n\r\n          // Remove element\r\n          destroyModalElement();\r\n\r\n          // remove backdrop element\r\n          if (backdropElement) {\r\n            backdropElement.remove();\r\n            backdropElement = null;\r\n          }\r\n\r\n          // Destroy scope\r\n          scope.$destroy();\r\n        };\r\n\r\n        $modal.show = function () {\r\n          if ($modal.$isShown) return;\r\n\r\n          var parent;\r\n          var after;\r\n          if (angular.isElement(options.container)) {\r\n            parent = options.container;\r\n            after = options.container[0].lastChild ? angular.element(options.container[0].lastChild) : null;\r\n          } else {\r\n            if (options.container) {\r\n              parent = findElement(options.container);\r\n              after = parent[0] && parent[0].lastChild ? angular.element(parent[0].lastChild) : null;\r\n            } else {\r\n              parent = null;\r\n              after = options.element;\r\n            }\r\n          }\r\n\r\n          // destroy any existing modal elements\r\n          if (modalElement) destroyModalElement();\r\n\r\n          // create a new scope, so we can destroy it and all child scopes\r\n          // when destroying the modal element\r\n          modalScope = $modal.$scope.$new();\r\n          // Fetch a cloned element linked from template (noop callback is required)\r\n          modalElement = $modal.$element = compileData.link(modalScope, function (clonedElement, scope) {});\r\n\r\n          if (options.backdrop) {\r\n            // set z-index\r\n            modalElement.css({\r\n              'z-index': dialogBaseZindex + (backdropCount * 20)\r\n            });\r\n            backdropElement.css({\r\n              'z-index': backdropBaseZindex + (backdropCount * 20)\r\n            });\r\n\r\n            // increment number of backdrops\r\n            backdropCount++;\r\n          }\r\n\r\n          if (scope.$emit(options.prefixEvent + '.show.before', $modal).defaultPrevented) {\r\n            return;\r\n          }\r\n          if (angular.isDefined(options.onBeforeShow) && angular.isFunction(options.onBeforeShow)) {\r\n            options.onBeforeShow($modal);\r\n          }\r\n\r\n          // Set the initial positioning.\r\n          modalElement.css({\r\n            display: 'block'\r\n          }).addClass(options.placement);\r\n\r\n          // Options: customClass\r\n          if (options.customClass) {\r\n            modalElement.addClass(options.customClass);\r\n          }\r\n\r\n          // Options: size\r\n          if (options.size && validSizes[options.size]) {\r\n            angular.element(findElement('.modal-dialog', modalElement[0])).addClass(validSizes[options.size]);\r\n          }\r\n\r\n          // Options: animation\r\n          if (options.animation) {\r\n            if (options.backdrop) {\r\n              backdropElement.addClass(options.backdropAnimation);\r\n            }\r\n            modalElement.addClass(options.animation);\r\n          }\r\n\r\n          if (options.backdrop) {\r\n            $animate.enter(backdropElement, bodyElement, null);\r\n          }\r\n\r\n          // Support v1.2+ $animate\r\n          // https://github.com/angular/angular.js/issues/11713\r\n          if (angular.version.minor <= 2) {\r\n            $animate.enter(modalElement, parent, after, enterAnimateCallback);\r\n          } else {\r\n            $animate.enter(modalElement, parent, after).then(enterAnimateCallback);\r\n          }\r\n\r\n          $modal.$isShown = scope.$isShown = true;\r\n          safeDigest(scope);\r\n          // Focus once the enter-animation has started\r\n          // Weird PhantomJS bug hack\r\n          var el = modalElement[0];\r\n          requestAnimationFrame(function () {\r\n            el.focus();\r\n          });\r\n\r\n          bodyElement.addClass(options.prefixClass + '-open');\r\n\r\n          layoutHideElement.attr('aria-hidden', 'true');\r\n\r\n          if (options.animation) {\r\n            bodyElement.addClass(options.prefixClass + '-with-' + options.animation);\r\n          }\r\n\r\n          // Bind events\r\n          bindBackdropEvents();\r\n          bindKeyboardEvents();\r\n        };\r\n\r\n        function enterAnimateCallback () {\r\n          scope.$emit(options.prefixEvent + '.show', $modal);\r\n          if (angular.isDefined(options.onShow) && angular.isFunction(options.onShow)) {\r\n            options.onShow($modal);\r\n          }\r\n\r\n          modalElement.attr('aria-hidden', 'false');\r\n\r\n          var focusableElement = angular.element(findElement('.modal'));\r\n\r\n          if (focusableElement.length > 0) {\r\n            focusableElement.attr('tabindex', '0');\r\n            setTimeout(function () {\r\n              focusableElement.focus();\r\n            }, 500);\r\n          } else{\t\t  \r\n\t\t\t  layoutHideElement.attr('aria-hidden', 'false');\r\n\t\t\t  unbindKeyboardEvents();\r\n\t\t  }\r\n        }\r\n\r\n        $modal.hide = function () {\r\n          if (!$modal.$isShown) return;\r\n\r\n          if (scope.$emit(options.prefixEvent + '.hide.before', $modal).defaultPrevented) {\r\n            return;\r\n          }\r\n          if (angular.isDefined(options.onBeforeHide) && angular.isFunction(options.onBeforeHide)) {\r\n            options.onBeforeHide($modal);\r\n          }\r\n\r\n          modalElement.attr('aria-hidden', 'true');\r\n\r\n          if ($modal.returnFocus && typeof $modal.returnFocus === 'function') $modal.returnFocus();\r\n\r\n          // Support v1.2+ $animate\r\n          // https://github.com/angular/angular.js/issues/11713\r\n          if (angular.version.minor <= 2) {\r\n            $animate.leave(modalElement, leaveAnimateCallback);\r\n          } else {\r\n            $animate.leave(modalElement).then(leaveAnimateCallback);\r\n          }\r\n\r\n          if (options.backdrop) {\r\n            // decrement number of backdrops\r\n            backdropCount--;\r\n            $animate.leave(backdropElement);\r\n          }\r\n          $modal.$isShown = scope.$isShown = false;\r\n          safeDigest(scope);\r\n\r\n          // Unbind events\r\n          unbindBackdropEvents();\r\n          unbindKeyboardEvents();\r\n        };\r\n\r\n        function leaveAnimateCallback () {\r\n          scope.$emit(options.prefixEvent + '.hide', $modal);\r\n          if (angular.isDefined(options.onHide) && angular.isFunction(options.onHide)) {\r\n            options.onHide($modal);\r\n          }\r\n          if (findElement('.modal').length <= 0) {\r\n            bodyElement.removeClass(options.prefixClass + '-open');\r\n            layoutHideElement.attr('aria-hidden', 'false');\r\n          }\r\n          if (options.animation) {\r\n            bodyElement.removeClass(options.prefixClass + '-with-' + options.animation);\r\n          }\r\n        }\r\n\r\n        function findFocusableElements () {\r\n          // Add all elements we want to include in our selection\r\n          var focusableElements = 'a:not([disabled]), button:not([disabled]), input:not([disabled]), [tabindex]:not([disabled]):not([tabindex=\"-1\"])';\r\n          if (document.activeElement) {\r\n            var focusable = Array.prototype.filter.call(modalElement[0].querySelectorAll(focusableElements),\r\n              function (element) {\r\n                // Check for visibility while always include the current activeElement\r\n                return element.offsetWidth > 0 || element.offsetHeight > 0 || element === document.activeElement;\r\n              });\r\n\r\n            return focusable;\r\n          }\r\n        }\r\n\r\n        function findNextFocusableElement (inReverse) {\r\n          if (document.activeElement) {\r\n            var focusable = findFocusableElements();\r\n            if (focusable === undefined) return;\r\n            if (inReverse) {\r\n              focusable = Array.prototype.reverse.call(focusable);\r\n            }\r\n\r\n            var index = focusable.indexOf(document.activeElement);\r\n            return focusable[index + 1];\r\n          }\r\n        }\r\n\r\n        $modal.toggle = function () {\r\n          if ($modal.$isShown) {\r\n            $modal.hide();\r\n          } else {\r\n            $modal.show();\r\n          }\r\n        };\r\n\r\n        $modal.focus = function () {\r\n          modalElement[0].focus();\r\n        };\r\n\r\n        // Protected methods\r\n\r\n        $modal.$onKeyUp = function (evt) {\r\n\r\n          // Escape was pressed on an open modal. Hide it.  Backspace key, nothing happen.\r\n          if ((evt.which === 8||evt.which === 27) && $modal.$isShown) {\r\n            if (evt.which === 27) {\r\n               $modal.hide();\r\n            }\r\n            evt.stopPropagation();\r\n          }\r\n        };\r\n\r\n        $modal.$onKeyDown = function (evt) {\r\n          if (options.keyboard) {\r\n            if (evt.keyCode === 8 && evt.target.tagName!=='TEXTAREA' && evt.target.tagName!=='INPUT') {\r\n                evt.preventDefault();\r\n            }\t\t\t\t\r\n\t\t\t  \r\n            if (evt.keyCode === 9) {\r\n\r\n              var nextFocusable = findNextFocusableElement(evt.shiftKey);\r\n              if (nextFocusable === undefined) {\r\n                if (evt.preventDefault) evt.preventDefault();\r\n                if (evt.stopPropagation) evt.stopPropagation();\r\n\r\n                var focusable = findFocusableElements();\r\n                if (evt.shiftKey) {\r\n                  focusable[focusable.length - 1].focus();\r\n                } else {\r\n                  focusable[0].focus();\r\n                }\r\n              }\r\n            }\r\n          }\r\n        };\r\n\r\n        function bindBackdropEvents () {\r\n          if (options.backdrop) {\r\n            modalElement.on('click', hideOnBackdropClick);\r\n            backdropElement.on('click', hideOnBackdropClick);\r\n            backdropElement.on('wheel', preventEventDefault);\r\n          }\r\n        }\r\n\r\n        function unbindBackdropEvents () {\r\n          if (options.backdrop) {\r\n            modalElement.off('click', hideOnBackdropClick);\r\n            backdropElement.off('click', hideOnBackdropClick);\r\n            backdropElement.off('wheel', preventEventDefault);\r\n          }\r\n        }\r\n\r\n        function bindKeyboardEvents () {\r\n          if (options.keyboard) {\r\n            modalElement.on('keyup', $modal.$onKeyUp);\r\n            modalElement.on('keydown', $modal.$onKeyDown);\r\n          }\r\n        }\r\n\r\n        function unbindKeyboardEvents () {\r\n          if (options.keyboard) {\r\n            modalElement.off('keyup', $modal.$onKeyUp);\r\n            modalElement.off('keydown', $modal.$onKeyDown);\r\n          }\r\n        }\r\n\r\n        // Private helpers\r\n\r\n        function hideOnBackdropClick (evt) {\r\n          if (evt.target !== evt.currentTarget) return;\r\n          if (options.backdrop === 'static') {\r\n            $modal.focus();\r\n          } else {\r\n            $modal.hide();\r\n          }\r\n        }\r\n\r\n        function preventEventDefault (evt) {\r\n          evt.preventDefault();\r\n        }\r\n\r\n        function destroyModalElement () {\r\n          if ($modal.$isShown && modalElement !== null) {\r\n            // un-bind events\r\n            unbindBackdropEvents();\r\n            unbindKeyboardEvents();\r\n          }\r\n\r\n          if (modalScope) {\r\n            modalScope.$destroy();\r\n            modalScope = null;\r\n          }\r\n\r\n          if (modalElement) {\r\n            modalElement.remove();\r\n            modalElement = $modal.$element = null;\r\n          }\r\n        }\r\n\r\n        return $modal;\r\n\r\n      }\r\n\r\n      // Helper functions\r\n\r\n      function safeDigest (scope) {\r\n        /* eslint-disable no-unused-expressions */\r\n        scope.$$phase || (scope.$root && scope.$root.$$phase) || scope.$digest();\r\n        /* eslint-enable no-unused-expressions */\r\n      }\r\n\r\n      function findElement (query, element) {\r\n        return angular.element((element || document).querySelectorAll(query));\r\n      }\r\n\r\n      return ModalFactory;\r\n\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsModal', function ($window, $sce, $parse, $modal) {\r\n\r\n    return {\r\n      restrict: 'EAC',\r\n      scope: true,\r\n      link: function postLink (scope, element, attr, transclusion) {\r\n\r\n        // Directive options\r\n        var options = {\r\n          scope: scope,\r\n          element: element,\r\n          show: false\r\n        };\r\n        angular.forEach(['template', 'templateUrl', 'controller', 'controllerAs', 'contentTemplate', 'placement', 'backdrop', 'keyboard', 'html', 'container', 'animation', 'backdropAnimation', 'id', 'prefixEvent', 'prefixClass', 'customClass', 'modalClass', 'size', 'zIndex'], function (key) {\r\n          if (angular.isDefined(attr[key])) options[key] = attr[key];\r\n        });\r\n\r\n        // Options: alias modalClass to customClass\r\n        if (options.modalClass) {\r\n          options.customClass = options.modalClass;\r\n        }\r\n\r\n        // use string regex match boolean attr falsy values, leave truthy values be\r\n        var falseValueRegExp = /^(false|0|)$/i;\r\n        angular.forEach(['backdrop', 'keyboard', 'html', 'container'], function (key) {\r\n          if (angular.isDefined(attr[key]) && falseValueRegExp.test(attr[key])) options[key] = false;\r\n        });\r\n\r\n        // bind functions from the attrs to the show and hide events\r\n        angular.forEach(['onBeforeShow', 'onShow', 'onBeforeHide', 'onHide'], function (key) {\r\n          var bsKey = 'bs' + key.charAt(0).toUpperCase() + key.slice(1);\r\n          if (angular.isDefined(attr[bsKey])) {\r\n            options[key] = scope.$eval(attr[bsKey]);\r\n          }\r\n        });\r\n\r\n        // Support scope as data-attrs\r\n        angular.forEach(['title', 'content'], function (key) {\r\n          if (attr[key]) {\r\n            attr.$observe(key, function (newValue, oldValue) {\r\n              scope[key] = $sce.trustAsHtml(newValue);\r\n            });\r\n          }\r\n        });\r\n\r\n        // Support scope as an object\r\n        if (attr.bsModal) {\r\n          scope.$watch(attr.bsModal, function (newValue, oldValue) {\r\n            if (angular.isObject(newValue)) {\r\n              angular.extend(scope, newValue);\r\n            } else {\r\n              scope.content = newValue;\r\n            }\r\n          }, true);\r\n        }\r\n\r\n        // Initialize modal\r\n        var modal = $modal(options);\r\n\r\n        if (options.keyboard) {\r\n          modal.returnFocus = function () {\r\n            element[0].focus();\r\n          };\r\n        }\r\n\r\n        // Trigger\r\n        element.on(attr.trigger || 'click', modal.toggle);\r\n\r\n        // Garbage collection\r\n        scope.$on('$destroy', function () {\r\n          if (modal) modal.destroy();\r\n          options = null;\r\n          modal = null;\r\n        });\r\n\r\n      }\r\n    };\r\n\r\n  });\r\n"],"sourceRoot":"/source/"}