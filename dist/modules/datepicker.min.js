/**
 * angular-strap
 * @version v2.3.12 - 2017-04-13
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.datepicker',['mgcrea.ngStrap.helpers.dateParser','mgcrea.ngStrap.helpers.dateFormatter','mgcrea.ngStrap.helpers.focusElement','mgcrea.ngStrap.tooltip']).provider('$datepicker',function(){var e=this.defaults={animation:'am-fade',prefixClass:'datepicker',placement:'bottom-left',templateUrl:'datepicker/datepicker.tpl.html',trigger:'focus',container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:'date',dateFormat:'shortDate',timezone:null,modelDateFormat:null,dayFormat:'dd',monthFormat:'MMM',yearFormat:'yyyy',monthTitleFormat:'MMMM yyyy',yearTitleFormat:'yyyy',strictFormat:!1,autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:0,minView:0,startWeek:0,daysOfWeekDisabled:'',hasToday:!1,hasClear:!1,iconLeft:'glyphicon glyphicon-chevron-left',iconRight:'glyphicon glyphicon-chevron-right',screenReaderDateFormat:'fullDate',focusOnOpen:!1};this.$get=['$window','$document','$rootScope','$sce','$dateFormatter','datepickerViews','$tooltip','$timeout',function(t,a,n,o,r,i,d,l){function s(a,n,o){function r(e,t){if(!(/(33|34|38|37|39|40|13)/.test(e.keyCode)||/(33|34|38|37|39|40|13)/.test(e.keyCode)&&e.shiftKey||/(33|34|38|37|39|40|13)/.test(e.keyCode)&&e.altKey))return!1;if(e.preventDefault(),e.stopPropagation(),13===e.keyCode){if(D.$mode)void 0===t||t?D.$apply(function(){g.setMode(D.$mode-1)}):g.setMode(D.$mode-1);else if(g.hide(!0),$.focusOnOpen)return!0;return!1}return!0}function s(e){e.selected=g.$isSelected(e.date),e.focused=e.selected}function f(){a[0].focus()}var g=d(a,angular.extend({},e,o)),m=o.scope,$=g.$options,D=g.$scope;$.startView&&($.startView-=$.minView),a.attr('aria-expanded','false').attr('aria-haspopup','true');var h=i(g);g.$views=h.views;var p=h.viewDate;D.$mode=$.startView,D.$iconLeft=$.iconLeft,D.$iconRight=$.iconRight,D.$hasToday=$.hasToday,D.$hasClear=$.hasClear,D.id=null!==$.id&&void 0!==$.id?$.id:void 0,D.dropdownId=null!==$.id&&void 0!==$.id?$.id+'_dropdown':void 0,D.keyboard=$.keyboard,D.focusOnOpen=$.focusOnOpen,D.$nextLabel=$.labelNext,D.$previousLabel=$.labelPrevious;var y=g.$views[D.$mode];D.$select=function(e,t){t||g.select(e)},D.$selectPane=function(e){g.$selectPane(e)},D.$toggleMode=function(){g.setMode((D.$mode+1)%g.$views.length)},D.$setToday=function(){$.autoclose?(g.setMode(0),g.select(new Date)):g.select(new Date,!0)},D.$clear=function(){$.autoclose?(g.setMode(0),g.select(null)):g.select(null,!0)},D.$focused=function(e){D.selectedDayId=e.id,e.isNext&&!D.selected&&(D.$mode?g.update(e.date):D.$select(e.date))},D.$onKeyDown=function(e,t){var a=r(e,!1);a&&y.onKeyDown(e)},g.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())&&(g.$date=e,y.update.call(y,e)),g.$build(!0)},g.updateDisabledDates=function(e){$.disabledDateRanges=e;for(var t=0,a=D.rows.length;a>t;t++)angular.forEach(D.rows[t],g.$setDisabledEl)},g.select=function(e,t){angular.isDate(e)?(!angular.isDate(n.$dateValue)||isNaN(n.$dateValue.getTime()))&&(n.$dateValue=new Date(e)):n.$dateValue=null,!D.$mode||t?(n.$setViewValue(angular.copy(e)),n.$render(),$.autoclose&&!t&&l(function(){g.hide(!0)})):(angular.extend(p,{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}),g.setMode(D.$mode-1),g.$build())},g.setMode=function(e){D.$mode=e,y=g.$views[D.$mode],g.$build()},g.$build=function(e){e===!0&&y.built||(e!==!1||y.built)&&y.build.call(y)},g.$updateSelected=function(){for(var e=0,t=D.rows.length;t>e;e++)angular.forEach(D.rows[e],function(e){s(e),e.selected&&(D.selected=e)})},g.$isSelected=function(e){return y.isSelected(e)},g.$setDisabledEl=function(e){e.disabled=y.isDisabled(e.date)},g.$selectPane=function(e){var t=y.steps,a=new Date(Date.UTC(p.year+(t.year||0)*e,p.month+(t.month||0)*e,1));angular.extend(p,{year:a.getUTCFullYear(),month:a.getUTCMonth(),date:a.getUTCDate()}),g.$build()},g.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),c){var t=angular.element(e.target);'button'!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler('click')}},g.$onKeyDown=function(e){var t=r(e);t&&(y.onKeyDown(e),m.$digest())},g.$onFocusOut=function(e){for(var a=!1,n=angular.element(e.relatedTarget);void 0!==n&&n.length&&n[0]!==t.document.body;){if(n=n.parent(),void 0!==n&&n[0]===g.$element[0]){a=!0;break}a=!1}a?(e.stopPropagation(),e.preventDefault()):g.hide()};var w=g.init;g.init=function(){return u&&$.useNative?(a.prop('type','date'),void a.css('-webkit-appearance','textfield')):(c&&(a.prop('type','text'),a.attr('readonly','true'),a.on('click',f)),void w())};var b=g.destroy;g.destroy=function(){u&&$.useNative&&a.off('click',f),b()};var v=g.show;g.show=function(){!c&&a.attr('readonly')||a.attr('disabled')||(v(),l(function(){g.$isShown&&(g.$element.attr('aria-hidden','false'),a.attr('aria-expanded','true'),g.$element.on(c?'touchstart':'mousedown',g.$onMouseDown),$.keyboard&&($.focusOnOpen?g.$element.on('focusout',g.$onFocusOut):a.on('keydown',g.$onKeyDown)))},0,!1))};var F=g.hide;return g.hide=function(e){g.$isShown&&(g.$element.attr('aria-hidden','true'),a.attr('aria-expanded','false'),g.$element.off(c?'touchstart':'mousedown',g.$onMouseDown),$.keyboard&&(a.off('keydown',g.$onKeyDown),g.$element.off('keydown',g.$onKeyDown)),$.focusOnOpen&&(g.$element.off('focusout',g.$onFocusOut),a[0].focus()),F(e))},g}var u=/(ip[ao]d|iphone|android)/gi.test(t.navigator.userAgent),c='createTouch'in t.document&&u;return e.lang||(e.lang=r.getDefaultLocale()),s.defaults=e,s}]}).directive('bsDatepicker',['$window','$parse','$q','$dateFormatter','$dateParser','$datepicker',function(e,t,a,n,o,r){var i=/(ip[ao]d|iphone|android)/gi.test(e.navigator.userAgent);return{restrict:'EAC',require:'ngModel',link:function(e,t,a,d){function l(e){return e&&e.length?e:null}function s(e){if(angular.isDate(e)){var t=isNaN(g.$options.minDate)||e.getTime()>=g.$options.minDate,a=isNaN(g.$options.maxDate)||e.getTime()<=g.$options.maxDate,n=t&&a;d.$setValidity('date',n),d.$setValidity('min',t),d.$setValidity('max',a),n&&(d.$dateValue=e)}}function u(){return!d.$dateValue||isNaN(d.$dateValue.getTime())?'':$(d.$dateValue,c.dateFormat)}var c={scope:e};angular.forEach(['template','templateUrl','controller','controllerAs','placement','container','delay','trigger','html','animation','autoclose','dateType','dateFormat','timezone','modelDateFormat','dayFormat','strictFormat','startWeek','startDate','useNative','lang','startView','minView','iconLeft','iconRight','daysOfWeekDisabled','id','prefixClass','prefixEvent','hasToday','hasClear','focusOnOpen','labelNext','labelPrevious','labelMonth','labelYear','labelDays'],function(e){angular.isDefined(a[e])&&(c[e]=a[e])});var f=/^(false|0|)$/i;angular.forEach(['html','container','autoclose','useNative','hasToday','hasClear','focusOnOpen'],function(e){angular.isDefined(a[e])&&f.test(a[e])&&(c[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(t){var n='bs'+t.charAt(0).toUpperCase()+t.slice(1);angular.isDefined(a[n])&&(c[t]=e.$eval(a[n]))});var g=r(t,d,c);c=g.$options,i&&c.useNative&&(c.dateFormat='yyyy-MM-dd');var m=c.lang,$=function(e,t){return n.formatDate(e,t,m)},D=o({format:c.dateFormat,lang:m,strict:c.strictFormat});a.bsShow&&e.$watch(a.bsShow,function(e,t){g&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(datepicker),?/i)),e===!0?g.show():g.hide())}),angular.forEach(['minDate','maxDate'],function(e){angular.isDefined(a[e])&&a.$observe(e,function(t){g.$options[e]=D.getDateForAttribute(e,t),isNaN(g.$options[e])||g.$build(!1),s(d.$dateValue)})}),angular.isDefined(a.dateFormat)&&a.$observe('dateFormat',function(e){g.$options.dateFormat=e}),e.$watch(a.ngModel,function(e,t){g.update(d.$dateValue)},!0),angular.isDefined(a.disabledDates)&&e.$watch(a.disabledDates,function(e,t){e=l(e),t=l(t),e&&g.updateDisabledDates(e)}),d.$parsers.unshift(function(e){var t;if(!e)return d.$setValidity('date',!0),null;var a=D.parse(e,d.$dateValue);return!a||isNaN(a.getTime())?void d.$setValidity('date',!1):(s(a),'string'===c.dateType?(t=D.timezoneOffsetAdjust(a,c.timezone,!0),$(t,c.modelDateFormat||c.dateFormat)):(t=D.timezoneOffsetAdjust(d.$dateValue,c.timezone,!0),'number'===c.dateType?t.getTime():'unix'===c.dateType?t.getTime()/1e3:'iso'===c.dateType?t.toISOString():new Date(t)))}),d.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:'string'===c.dateType?D.parse(e,null,c.modelDateFormat):'unix'===c.dateType?new Date(1e3*e):new Date(e),d.$dateValue=D.timezoneOffsetAdjust(t,c.timezone),u()}),d.$render=function(){t.val(u())},e.$on('$destroy',function(){g&&g.destroy(),c=null,g=null})}}}]).directive('bsDatepickerDisplay',['$datepicker','$dateParser','$dateFormatter',function(e,t,a){return{require:'ngModel',link:function(n,o,r,i){function d(e){if(angular.isDate(e)){var t=isNaN(s.minDate)||e.getTime()>=s.minDate,a=isNaN(s.maxDate)||e.getTime()<=s.maxDate,n=t&&a;i.$setValidity('date',n),i.$setValidity('min',t),i.$setValidity('max',a),n&&(i.$dateValue=e)}}function l(){return!i.$dateValue||isNaN(i.$dateValue.getTime())?'':c(i.$dateValue,s.dateFormat)}var s={scope:n};angular.forEach(['dateType','dateFormat','timezone','modelDateFormat','dayFormat','strictFormat','lang'],function(e){angular.isDefined(r[e])&&(s[e]=r[e])}),s=angular.extend({},e.defaults,s);var u=s.lang,c=function(e,t){return a.formatDate(e,t,u)},f=t({format:s.dateFormat,lang:u,strict:s.strictFormat});angular.forEach(['minDate','maxDate'],function(e){angular.isDefined(r[e])&&r.$observe(e,function(t){s[e]=f.getDateForAttribute(e,t),d(i.$dateValue)})}),angular.isDefined(r.dateFormat)&&r.$observe('dateFormat',function(e){s.dateFormat=e}),i.$parsers.unshift(function(e){var t;if(!e)return i.$setValidity('date',!0),null;var a=f.parse(e,i.$dateValue);return!a||isNaN(a.getTime())?void i.$setValidity('date',!1):(d(a),'string'===s.dateType?(t=f.timezoneOffsetAdjust(a,s.timezone,!0),c(t,s.modelDateFormat||s.dateFormat)):(t=f.timezoneOffsetAdjust(i.$dateValue,s.timezone,!0),'number'===s.dateType?t.getTime():'unix'===s.dateType?t.getTime()/1e3:'iso'===s.dateType?t.toISOString():new Date(t)))}),i.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:'string'===s.dateType?f.parse(e,null,s.modelDateFormat):'unix'===s.dateType?new Date(1e3*e):new Date(e),i.$dateValue=f.timezoneOffsetAdjust(t,s.timezone),l()})}}}]).provider('datepickerViews',function(){function e(e,t){for(var a=[];e.length>0;)a.push(e.splice(0,t));return a}function t(e,t){return(e%t+t)%t}this.$get=['$dateFormatter','$dateParser','$sce',function(a,n,o){return function(r){for(var i=r.$scope,d=r.$options,l=d.lang,s=function(e,t){return a.formatDate(e,t,l)},u=n({format:d.dateFormat,lang:l,strict:d.strictFormat}),c=a.weekdaysShort(l),f=a.weekdays(l),g=c.slice(d.startWeek).concat(c.slice(0,d.startWeek)),m=f.slice(d.startWeek).concat(c.slice(0,d.startWeek)),$='',D=0;D<g.length;D++){var h=g[D],p=m[D];$+='<th scope="col" role="columnheader" class="dow text-center" aria-label="'+p+'"><abbr title="'+p+'">'+h+'</abbr></th>'}$=o.trustAsHtml($);var y=r.$date||(d.startDate?u.getDateForAttribute('startDate',d.startDate):new Date),w={year:y.getFullYear(),month:y.getMonth(),date:y.getDate()},b=[{format:d.dayFormat,split:7,steps:{month:1},update:function(e,t){!this.built||t||e.getFullYear()!==w.year||e.getMonth()!==w.month?(angular.extend(w,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$build()):(e.getDate()!==w.date||1===e.getDate())&&(w.date=r.$date.getDate(),r.$updateSelected())},build:function(){var n=new Date(w.year,w.month,1),o=n.getTimezoneOffset(),l=new Date(+n-864e5*t(n.getDay()-d.startWeek,7)),c=l.getTimezoneOffset(),f=u.timezoneOffsetAdjust(new Date,d.timezone).toDateString();c!==o&&(l=new Date(+l+6e4*(c-o)));for(var g,m,D,h=[],p=0;42>p;p++){g=u.daylightSavingAdjust(new Date(l.getFullYear(),l.getMonth(),l.getDate()+p));var y={id:null!==d.id&&void 0!==d.id?d.id+'_cell_'+p:void 0,date:g,value:g.getDate(),isToday:g.toDateString()===f,label:s(g,this.format),screenReaderLabel:s(g,a.getDatetimeFormat(d.screenReaderDateFormat)),selected:r.$date&&this.isSelected(g),muted:g.getMonth()!==w.month,disabled:this.isDisabled(g)};y.selected&&(m=y),y.isToday&&(D=y),h.push(y)}i.selected=null;var b=!1;d.focusOnOpen&&(m?(i.selectedDayId=m.id,D&&(D.focused=!1),m.focused=!0,i.selected=m):D?D.focused=!0:b=!0),i.title=s(n,d.monthTitleFormat),i.showLabels=!0,i.labels=$,i.rows=e(h,this.split),b&&(i.rows[0][0].isNext=!0),i.isTodayDisabled=this.isDisabled(new Date),i.hasSelectedDate=null!=r.$date,i.$modeLabel=d.labelMonth,this.built=!0},isSelected:function(e){return r.$date&&e.getFullYear()===r.$date.getFullYear()&&e.getMonth()===r.$date.getMonth()&&e.getDate()===r.$date.getDate()},isDisabled:function(e){var t=e.getTime();if(t<d.minDate||t>d.maxDate)return!0;if(-1!==d.daysOfWeekDisabled.indexOf(e.getDay()))return!0;if(d.disabledDateRanges)for(var a=0;a<d.disabledDateRanges.length;a++)if(t>=d.disabledDateRanges[a].start&&t<=d.disabledDateRanges[a].end)return!0;return!1},onKeyDown:function(e){var t;if(d.keyboard&&d.focusOnOpen&&!r.$date&&(angular.element(e.target).find('span').hasClass('btn-today')?r.$date=new Date:r.$date=u.parse(angular.element(e.target).attr('aria-label'),null,d.screenReaderDateFormat)),!r.$date)return!1;t=r.$date.getTime();var a;switch(e.keyCode){case 13:if(d.focusOnOpen)return r.select(new Date(t),!0),!1;break;case 33:e.altKey?a=new Date(r.$date.getFullYear()-1,r.$date.getMonth(),r.$date.getDate()):(a=new Date(r.$date.getFullYear(),r.$date.getMonth()-1,r.$date.getDate()),a.getMonth()>r.$date.getMonth()-1&&(a=new Date(r.$date.getFullYear(),r.$date.getMonth(),0)));break;case 34:e.altKey?a=new Date(r.$date.getFullYear()+1,r.$date.getMonth(),r.$date.getDate()):(a=new Date(r.$date.getFullYear(),r.$date.getMonth()+1,r.$date.getDate()),a.getMonth()>r.$date.getMonth()+1&&(a=new Date(r.$date.getFullYear(),r.$date.getMonth()+1,1)));break;case 37:a=new Date(t-864e5);break;case 38:a=new Date(t-6048e5);break;case 39:a=new Date(t+864e5);break;case 40:a=new Date(t+6048e5);break;default:return!1}return this.isDisabled(a)||r.select(a,!0),e&&e.stopPropagation&&e.stopPropagation(),!1}},{name:'month',format:d.monthFormat,split:4,steps:{year:1},update:function(e,t){this.built&&e.getFullYear()===w.year?e.getMonth()!==w.month&&(angular.extend(w,{month:r.$date.getMonth(),date:r.$date.getDate()}),r.$updateSelected()):(angular.extend(w,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$build())},build:function(){for(var t,a,n,o=[],l=new Date((new Date).getFullYear(),(new Date).getMonth(),1),u=0;12>u;u++){t=new Date(w.year,u,1);var c={date:t,label:s(t,this.format),selected:r.$isSelected(t),isToday:t.getFullYear()===l.getFullYear()&&t.getMonth()===l.getMonth(),disabled:this.isDisabled(t)};c.selected&&(a=c),c.isToday&&(n=c),o.push(c)}i.selected=null;var f=!1;d.focusOnOpen&&(a?(i.selectedDayId=a.id,n&&(n.focused=!1),a.focused=!0,i.selected=a):n?n.focused=!0:f=!0),i.title=s(t,d.yearTitleFormat),i.showLabels=!1,i.rows=e(o,this.split),f&&(i.rows[0][0].isNext=!0),i.$modeLabel=d.labelYear,this.built=!0},isSelected:function(e){return r.$date&&e.getFullYear()===r.$date.getFullYear()&&e.getMonth()===r.$date.getMonth()},isDisabled:function(e){var t=+new Date(e.getFullYear(),e.getMonth()+1,0);return t<d.minDate||e.getTime()>d.maxDate},onKeyDown:function(e){if(d.keyboard&&d.focusOnOpen&&!r.$date&&angular.element(e.target).find('span').hasClass('btn-today')&&(r.$date=new Date((new Date).getFullYear(),(new Date).getMonth(),1)),r.$date){var t=r.$date.getMonth(),a=new Date(r.$date);37===e.keyCode?a.setMonth(t-1):38===e.keyCode?a.setMonth(t-4):39===e.keyCode?a.setMonth(t+1):40===e.keyCode&&a.setMonth(t+4),d.focusOnOpen&&13===e.keyCode?r.select(new Date(r.$date)):this.isDisabled(a)||r.select(a,!0)}}},{name:'year',format:d.yearFormat,split:4,steps:{year:12},update:function(e,t){!this.built||t||parseInt(e.getFullYear()/20,10)!==parseInt(w.year/20,10)?(angular.extend(w,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$build()):e.getFullYear()!==w.year&&(angular.extend(w,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$updateSelected())},build:function(){for(var t,a,n,o=w.year-w.year%(3*this.split),l=[],u=0;12>u;u++){t=new Date(o+u,0,1);var c={date:t,label:s(t,this.format),selected:r.$isSelected(t),isToday:t.getFullYear()===(new Date).getFullYear(),disabled:this.isDisabled(t)};c.selected&&(a=c),c.isToday&&(n=c),l.push(c)}i.selected=null;var f=!1;d.focusOnOpen&&(a?(i.selectedDayId=a.id,n&&(n.focused=!1),a.focused=!0,i.selected=a):n?n.focused=!0:f=!0),i.title=l[0].label+'-'+l[l.length-1].label,i.showLabels=!1,i.rows=e(l,this.split),f&&(i.rows[0][0].isNext=!0),i.$modelLabel=d.labelDays,this.built=!0},isSelected:function(e){return r.$date&&e.getFullYear()===r.$date.getFullYear()},isDisabled:function(e){var t=+new Date(e.getFullYear()+1,0,0);return t<d.minDate||e.getTime()>d.maxDate},onKeyDown:function(e){if(d.keyboard&&d.focusOnOpen&&!r.$date&&angular.element(e.target).find('span').hasClass('btn-today')&&(r.$date=new Date((new Date).getFullYear(),0,1)),r.$date){var t=r.$date.getFullYear(),a=new Date(r.$date);37===e.keyCode?a.setYear(t-1):38===e.keyCode?a.setYear(t-4):39===e.keyCode?a.setYear(t+1):40===e.keyCode&&a.setYear(t+4),this.isDisabled(a)||r.select(a,!0)}}}];return{views:d.minView?Array.prototype.slice.call(b,d.minView):b,viewDate:w}}}]});
//# sourceMappingURL=datepicker.min.js.map
