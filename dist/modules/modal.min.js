/**
 * angular-strap
 * @version v2.3.12 - 2017-08-28
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.modal',['mgcrea.ngStrap.core','mgcrea.ngStrap.helpers.dimensions']).provider('$modal',function(){var e=this.defaults={animation:'am-fade',backdropAnimation:'am-fade',customClass:'',prefixClass:'modal',prefixEvent:'modal',placement:'top',templateUrl:'modal/modal.tpl.html',template:'',contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0,size:null,zIndex:null,containerElement:null};this.$get=['$window','$rootScope','$bsCompiler','$animate','$timeout','$sce','dimensions',function(n,o,t,a,i,r,l){function s(n){function i(){H.$emit(A.prefixEvent+'.show',D),angular.isDefined(A.onShow)&&angular.isFunction(A.onShow)&&A.onShow(D),B.attr('aria-hidden','false');var e=angular.element(u('.modal'));e.length>0&&(e.attr('tabindex','0'),setTimeout(function(){e.focus()},500))}function l(){H.$emit(A.prefixEvent+'.hide',D),angular.isDefined(A.onHide)&&angular.isFunction(A.onHide)&&A.onHide(D),u('.modal').length<=0&&(m.removeClass(A.prefixClass+'-open'),h.attr('aria-hidden','false')),A.animation&&m.removeClass(A.prefixClass+'-with-'+A.animation)}function s(){var e='a:not([disabled]), button:not([disabled]), input:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])';if(document.activeElement){var n=Array.prototype.filter.call(B[0].querySelectorAll(e),function(e){return e.offsetWidth>0||e.offsetHeight>0||e===document.activeElement});return n}}function p(e){if(document.activeElement){var n=s();if(void 0===n)return;e&&(n=Array.prototype.reverse.call(n));var o=n.indexOf(document.activeElement);return n[o+1]}}function b(){A.backdrop&&(B.on('click',x),U.on('click',x),U.on('wheel',S))}function y(){A.backdrop&&(B.off('click',x),U.off('click',x),U.off('wheel',S))}function k(){A.keyboard&&(B.on('keyup',D.$onKeyUp),B.on('keydown',D.$onKeyDown))}function C(){A.keyboard&&(B.off('keyup',D.$onKeyUp),B.off('keydown',D.$onKeyDown))}function x(e){e.target===e.currentTarget&&('static'===A.backdrop?D.focus():D.hide())}function S(e){e.preventDefault()}function E(){D.$isShown&&null!==B&&(y(),C()),K&&(K.$destroy(),K=null),B&&(B.remove(),B=D.$element=null)}var D={},A=D.$options=angular.extend({},e,n),z=D.$promise=t.compile(A),H=D.$scope=A.scope&&A.scope.$new()||o.$new();A.containerElement&&(h=angular.element(A.containerElement)),A.element||A.container||(A.container='body'),A.zIndex&&(g=parseInt(A.zIndex,10),v=g-10),D.$id=A.id||A.element&&A.element.attr('id')||'',D.returnFocus=function(){},d(['title','content'],function(e){A[e]&&(H[e]=r.trustAsHtml(A[e]))}),H.$hide=function(){H.$$postDigest(function(){D.hide()})},H.$show=function(){H.$$postDigest(function(){D.show()})},H.$toggle=function(){H.$$postDigest(function(){D.toggle()})},D.$isShown=H.$isShown=!1;var F,B,K,U=angular.element('<div class="'+A.prefixClass+'-backdrop"/>');return U.css({position:'fixed',top:'0px',left:'0px',bottom:'0px',right:'0px'}),z.then(function(e){F=e,D.init()}),D.init=function(){A.show&&H.$$postDigest(function(){D.show()})},D.destroy=function(){E(),U&&(U.remove(),U=null),H.$destroy()},D.show=function(){if(!D.$isShown){var e,n;if(angular.isElement(A.container)?(e=A.container,n=A.container[0].lastChild?angular.element(A.container[0].lastChild):null):A.container?(e=u(A.container),n=e[0]&&e[0].lastChild?angular.element(e[0].lastChild):null):(e=null,n=A.element),B&&E(),K=D.$scope.$new(),B=D.$element=F.link(K,function(e,n){}),A.backdrop&&(B.css({'z-index':g+20*$}),U.css({'z-index':v+20*$}),$++),!H.$emit(A.prefixEvent+'.show.before',D).defaultPrevented){angular.isDefined(A.onBeforeShow)&&angular.isFunction(A.onBeforeShow)&&A.onBeforeShow(D),B.css({display:'block'}).addClass(A.placement),A.customClass&&B.addClass(A.customClass),A.size&&w[A.size]&&angular.element(u('.modal-dialog',B[0])).addClass(w[A.size]),A.animation&&(A.backdrop&&U.addClass(A.backdropAnimation),B.addClass(A.animation)),A.backdrop&&a.enter(U,m,null),angular.version.minor<=2?a.enter(B,e,n,i):a.enter(B,e,n).then(i),D.$isShown=H.$isShown=!0,c(H);var o=B[0];f(function(){o.focus()}),m.addClass(A.prefixClass+'-open'),h.attr('aria-hidden','true'),A.animation&&m.addClass(A.prefixClass+'-with-'+A.animation),b(),k()}}},D.hide=function(){D.$isShown&&(H.$emit(A.prefixEvent+'.hide.before',D).defaultPrevented||(angular.isDefined(A.onBeforeHide)&&angular.isFunction(A.onBeforeHide)&&A.onBeforeHide(D),B.attr('aria-hidden','true'),D.returnFocus&&'function'==typeof D.returnFocus&&D.returnFocus(),angular.version.minor<=2?a.leave(B,l):a.leave(B).then(l),A.backdrop&&($--,a.leave(U)),D.$isShown=H.$isShown=!1,c(H),y(),C()))},D.toggle=function(){D.$isShown?D.hide():D.show()},D.focus=function(){B[0].focus()},D.$onKeyUp=function(e){27===e.which&&D.$isShown&&(D.hide(),e.stopPropagation())},D.$onKeyDown=function(e){if(A.keyboard&&9===e.keyCode){var n=p(e.shiftKey);if(void 0===n){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var o=s();e.shiftKey?o[o.length-1].focus():o[0].focus()}}},D}function c(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function u(e,n){return angular.element((n||document).querySelectorAll(e))}var d=angular.forEach,f=n.requestAnimationFrame||n.setTimeout,m=angular.element(n.document.body),p='#layoutContainer',h=angular.element(p),$=0,g=1050,v=1040,w={lg:'modal-lg',sm:'modal-sm'};return s}]}).directive('bsModal',['$window','$sce','$parse','$modal',function(e,n,o,t){return{restrict:'EAC',scope:!0,link:function(e,o,a,i){var r={scope:e,element:o,show:!1};angular.forEach(['template','templateUrl','controller','controllerAs','contentTemplate','placement','backdrop','keyboard','html','container','animation','backdropAnimation','id','prefixEvent','prefixClass','customClass','modalClass','size','zIndex'],function(e){angular.isDefined(a[e])&&(r[e]=a[e])}),r.modalClass&&(r.customClass=r.modalClass);var l=/^(false|0|)$/i;angular.forEach(['backdrop','keyboard','html','container'],function(e){angular.isDefined(a[e])&&l.test(a[e])&&(r[e]=!1)}),angular.forEach(['onBeforeShow','onShow','onBeforeHide','onHide'],function(n){var o='bs'+n.charAt(0).toUpperCase()+n.slice(1);angular.isDefined(a[o])&&(r[n]=e.$eval(a[o]))}),angular.forEach(['title','content'],function(o){a[o]&&a.$observe(o,function(t,a){e[o]=n.trustAsHtml(t)})}),a.bsModal&&e.$watch(a.bsModal,function(n,o){angular.isObject(n)?angular.extend(e,n):e.content=n},!0);var s=t(r);r.keyboard&&(s.returnFocus=function(){o[0].focus()}),o.on(a.trigger||'click',s.toggle),e.$on('$destroy',function(){s&&s.destroy(),r=null,s=null})}}}]);
//# sourceMappingURL=modal.min.js.map
