{"version":3,"sources":["modules/tab.js"],"names":["angular","module","provider","_tabsHash","animation","_addTabControl","template","navClass","activeClass","controller","isVertical","this","isDefined","$attrs","key","control","forEach","$scope","self","newIndex","disabled","navigatePane","toLeft","$panes","$setActive","name","index","length","$activePaneChangeListeners","pane","$options","copy","defaults","$navClass","$activeClass","falseValueRegExp","test","stopPropagation","$onClick","evt","preventDefault","tabPane","$labeledBy","isUndefined","$active","active","activeIndex","undefined","id","$remove","indexOf","splice","map","value","fn","$pane","$onKeyPress","e","keyCode","charCode","$tab","$get","directive","scope","require","transclude","templateUrl","attr","link","postLink","ngModelCtrl","bsTabsCtrl","tabKey","addTabControl","controllers","$setViewValue","$formatters","modelValue","push","liElements","element","find","i","iElement","$timeout","attrs","bsActivePane","parsedBsActivePane","$parse","assign","$watch","newValue","oldValue","$window","$animate","$sce","title","trustAsHtml","render","$isActive","addClass","$push","$describedBy","$on","restrict","elem","focusOn","focus"],"mappings":"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","file":"modules/tab.min.js","sourcesContent":["'use strict';\n\nangular.module('mgcrea.ngStrap.tab', [])\n\n  .provider('$tab', function () {\n\n    var defaults = this.defaults = {\n      animation: 'am-fade',\n      template: 'tab/tab.tpl.html',\n      navClass: 'nav-tabs',\n      activeClass: 'active',\n      isVertical: false\n    };\n    var _tabsHash = {};\n\n    var _addTabControl = function (key, control) {\n      if (!_tabsHash[key]) _tabsHash[key] = control;\n    };\n\n    var controller = this.controller = function ($scope, $element, $attrs, $timeout) {\n      var self = this;\n\n      // Attributes options\n      self.$options = angular.copy(defaults);\n      angular.forEach(['animation', 'navClass', 'activeClass', 'id', 'isVertical'], function (key) {\n        if (angular.isDefined($attrs[key])) self.$options[key] = $attrs[key];\n      });\n\n      // use string regex match boolean attr falsy values, leave truthy values be\n      var falseValueRegExp = /^(false|0|)$/i;\n      angular.forEach(['isVertical'], function (key) {\n        if (angular.isDefined($attrs[key]) && falseValueRegExp.test($attrs[key])) self.$options[key] = false;\n      });\n\n      // Publish options on scope\n      $scope.$navClass = self.$options.navClass;\n      $scope.$activeClass = self.$options.activeClass;\n\n      $scope.$onClick = function $onClick (evt, pane, index) {\n        if (!pane.disabled) {\n          self.$setActive(pane.name || index);\n        }\n\n        evt.preventDefault();\n        evt.stopPropagation();\n      };\n\n      function navigatePane (index, toLeft) {\n        var newIndex = 0;\n\n        if (toLeft) {\n          // Moving to the left\n          newIndex = index - 1 < 0 ? (self.$panes.length - 1) : (index - 1);\n        } else {\n          // Moving to the right\n          newIndex = (index + 1) >= self.$panes.length ? 0 : (index + 1);\n        }\n\n        if (self.$panes[newIndex].disabled) {\n          navigatePane(newIndex, toLeft);\n        } else {\n          self.$setActive(self.$panes[newIndex].name || newIndex);\n        }\n      }\n\n      self.$panes = $scope.$panes = [];\n\n      // Please use $activePaneChangeListeners if you use `bsActivePane`\n      // Because we removed `ngModel` as default, we rename viewChangeListeners to\n      // activePaneChangeListeners to make more sense.\n      self.$activePaneChangeListeners = self.$viewChangeListeners = [];\n\n      self.$push = function (pane) {\n        if (angular.isUndefined(self.$panes.$active)) {\n          $scope.$setActive(pane.name || 0);\n        }\n\n        self.$panes.push(pane);\n\n        self.$panes.forEach(function (tabPane, index) {\n          // Set an id value for the pane so that it can be used in the template\n          tabPane.$describedBy = self.$options.id === undefined ? undefined : self.$options.id + '_$tab_' + index;\n          tabPane.$labeledBy = self.$options.id === undefined ? undefined : self.$options.id + '_$tab_' + index + '_a';\n        });\n      };\n\n      self.$remove = function (pane) {\n        var index = self.$panes.indexOf(pane);\n        var active = self.$panes.$active;\n        var activeIndex;\n        if (angular.isString(active)) {\n          activeIndex = self.$panes.map(function (pane) {\n            return pane.name;\n          }).indexOf(active);\n        } else {\n          activeIndex = self.$panes.$active;\n        }\n\n        // remove pane from $panes array\n        self.$panes.splice(index, 1);\n\n        if (index < activeIndex) {\n          // we removed a pane before the active pane, so we need to\n          // decrement the active pane index\n          activeIndex--;\n        } else if (index === activeIndex && activeIndex === self.$panes.length) {\n          // we remove the active pane and it was the one at the end,\n          // so select the previous one\n          activeIndex--;\n        }\n        if (activeIndex >= 0 && activeIndex < self.$panes.length) {\n          self.$setActive(self.$panes[activeIndex].name || activeIndex);\n        } else {\n          self.$setActive();\n        }\n      };\n\n      self.$setActive = $scope.$setActive = function (value) {\n        self.$panes.$active = value;\n        self.$activePaneChangeListeners.forEach(function (fn) {\n          fn();\n        });\n      };\n\n      self.$isActive = $scope.$isActive = function ($pane, $index) {\n        return self.$panes.$active === $pane.name || self.$panes.$active === $index;\n      };\n\n      self.$onKeyPress = $scope.$onKeyPress = function (e, name, index) {\n        if (e.keyCode === 32 || e.charCode === 32 || e.keyCode === 13 || e.charCode === 13) {\n          // If space or enter was pressed\n          self.$setActive(name);\n\n          e.preventDefault();\n          e.stopPropagation();\n\n        } else if (!self.$options.isVertical && (e.keyCode === 37 || e.charCode === 37 || e.keyCode === 39 || e.charCode === 39)) {\n          // If the left of right arrow key was pressed.\n          navigatePane(index, (e.keyCode === 37 || e.charCode === 37));\n        } else if (self.$options.isVertical && (e.keyCode === 38 || e.charCode === 38 || e.keyCode === 40 || e.charCode === 40)) {\n          // If the left of right arrow key was pressed.\n          navigatePane(index, (e.keyCode === 38 || e.charCode === 38));\n        }\n      };\n    };\n\n    this.$get = function () {\n      var $tab = {};\n      $tab.defaults = defaults;\n      $tab.controller = controller;\n      $tab.addTabControl = _addTabControl;\n      $tab.tabsHash = _tabsHash;\n      return $tab;\n    };\n\n  })\n\n  .directive('bsTabs', function ($window, $animate, $tab, $parse, $timeout) {\n\n    var defaults = $tab.defaults;\n\n    return {\n      require: ['?ngModel', 'bsTabs'],\n      transclude: true,\n      scope: true,\n      controller: ['$scope', '$element', '$attrs', '$timeout', $tab.controller],\n      templateUrl: function (element, attr) {\n        return attr.template || defaults.template;\n      },\n      link: function postLink (scope, element, attrs, controllers) {\n\n        var ngModelCtrl = controllers[0];\n        var bsTabsCtrl = controllers[1];\n\n        // Add a way for developers to access tab scope if needed.  This allows for more fine grained control over what\n        // tabs are available in the tab component\n        if (attrs.tabKey !== '' && attrs.tabKey !== undefined) {\n          $tab.addTabControl(attrs.tabKey, bsTabsCtrl);\n        }\n\n        // 'ngModel' does interfere with form validation\n        // and status, use `bsActivePane` instead to avoid it\n        if (ngModelCtrl) {\n\n          // Update the modelValue following\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\n            ngModelCtrl.$setViewValue(bsTabsCtrl.$panes.$active);\n          });\n\n          // modelValue -> $formatters -> viewValue\n          ngModelCtrl.$formatters.push(function (modelValue) {\n            // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\n            bsTabsCtrl.$setActive(modelValue);\n            return modelValue;\n          });\n        }\n\n        bsTabsCtrl.$activePaneChangeListeners.push(function () {\n          $timeout(function () {\n            // get li elements\n            var liElements = element.find('li');\n            for (var i = 0; i < liElements.length; i++) {\n              var iElement = angular.element(liElements[i]);\n              if (iElement.hasClass(bsTabsCtrl.$options.activeClass)) {\n                // if li is active, set focus to it.\n                iElement.find('a')[0].focus();\n              }\n            }\n            // delay, for the class (.active) change to reflect in DOM.\n          }, 100);\n        });\n\n        if (attrs.bsActivePane) {\n          // adapted from angularjs ngModelController bindings\n          // https://github.com/angular/angular.js/blob/v1.3.1/src%2Fng%2Fdirective%2Finput.js#L1730\n          var parsedBsActivePane = $parse(attrs.bsActivePane);\n\n          // Update bsActivePane value with change\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\n            parsedBsActivePane.assign(scope, bsTabsCtrl.$panes.$active);\n          });\n\n          // watch bsActivePane for value changes\n          scope.$watch(attrs.bsActivePane, function (newValue, oldValue) {\n            bsTabsCtrl.$setActive(newValue);\n          }, true);\n        }\n      }\n    };\n\n  })\n\n  .directive('bsPane', function ($window, $animate, $sce) {\n\n    return {\n      require: ['^?ngModel', '^bsTabs'],\n      scope: true,\n      link: function postLink (scope, element, attrs, controllers) {\n\n        // var ngModelCtrl = controllers[0];\n        var bsTabsCtrl = controllers[1];\n\n        // Add base class\n        element.addClass('tab-pane');\n\n        // Set up the assistive attributes\n        element.attr('role', 'tabpanel');\n\n        // Observe title attribute for change\n        attrs.$observe('title', function (newValue, oldValue) {\n          scope.title = $sce.trustAsHtml(newValue);\n        });\n\n        // Save tab name into scope\n        scope.name = attrs.name;\n        // Save tab id into scope\n        scope.id = attrs.id;\n\n        scope.name = scope.name || scope.id;\n\n        // Add animation class\n        if (bsTabsCtrl.$options.animation) {\n          element.addClass(bsTabsCtrl.$options.animation);\n        }\n\n        attrs.$observe('disabled', function (newValue, oldValue) {\n          scope.disabled = scope.$eval(newValue);\n        });\n\n        // Push pane to parent bsTabs controller\n        bsTabsCtrl.$push(scope);\n\n        // Once the push has occured when can then update the element with some properties.\n        // Update the aria-describedby attribute\n        if (scope.$describedBy !== undefined) {\n          element.attr('aria-describedby', scope.$describedBy);\n        }\n\n        // remove pane from tab controller when pane is destroyed\n        scope.$on('$destroy', function () {\n          bsTabsCtrl.$remove(scope);\n        });\n\n        function render () {\n          var index = bsTabsCtrl.$panes.indexOf(scope);\n\n          $animate[bsTabsCtrl.$isActive(scope, index) ? 'addClass' : 'removeClass'](element, bsTabsCtrl.$options.activeClass);\n        }\n\n        bsTabsCtrl.$activePaneChangeListeners.push(function () {\n          render();\n        });\n        render();\n\n      }\n    };\n\n  })\n  \n  .directive('focusOn', function() {\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tlink: function(scope, elem, attr) {\n\t\t\t\tscope.$watch(attr.focusOn, function(newValue, oldValue) {\n\t\t\t\t\tnewValue !== oldValue && newValue && elem[0].focus();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n"],"sourceRoot":"/source/"}