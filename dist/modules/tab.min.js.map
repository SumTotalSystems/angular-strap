{"version":3,"sources":["modules/tab.js"],"names":["angular","module","provider","_tabsHash","animation","_addTabControl","template","navClass","activeClass","controller","isVertical","this","isDefined","$attrs","key","control","forEach","$scope","self","newIndex","disabled","navigatePane","$","toLeft","$panes","index","$labeledBy","focus","length","$activePaneChangeListeners","isUndefined","$active","$setActive","pane","name","$options","copy","defaults","$navClass","$activeClass","falseValueRegExp","test","stopPropagation","$onClick","evt","preventDefault","tabPane","active","activeIndex","undefined","id","$remove","indexOf","splice","map","value","fn","$pane","$onKeyPress","e","keyCode","charCode","$tab","$get","directive","scope","require","transclude","templateUrl","attr","link","postLink","ngModelCtrl","bsTabsCtrl","tabKey","addTabControl","controllers","$setViewValue","$formatters","modelValue","push","liElements","element","find","i","iElement","$timeout","parsedBsActivePane","attrs","bsActivePane","assign","$parse","$watch","newValue","oldValue","$window","$animate","$sce","title","trustAsHtml","render","$isActive","addClass","$push","$describedBy","$on","restrict","elem","focusOn"],"mappings":"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","file":"modules/tab.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.tab', [])\r\n\r\n  .provider('$tab', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      template: 'tab/tab.tpl.html',\r\n      navClass: 'nav-tabs',\r\n      activeClass: 'active',\r\n      isVertical: false\r\n    };\r\n    var _tabsHash = {};\r\n\r\n    var _addTabControl = function (key, control) {\r\n      if (!_tabsHash[key]) _tabsHash[key] = control;\r\n    };\r\n\r\n    var controller = this.controller = function ($scope, $element, $attrs, $timeout) {\r\n      var self = this;\r\n\r\n      // Attributes options\r\n      self.$options = angular.copy(defaults);\r\n      angular.forEach(['animation', 'navClass', 'activeClass', 'id', 'isVertical'], function (key) {\r\n        if (angular.isDefined($attrs[key])) self.$options[key] = $attrs[key];\r\n      });\r\n\r\n      // use string regex match boolean attr falsy values, leave truthy values be\r\n      var falseValueRegExp = /^(false|0|)$/i;\r\n      angular.forEach(['isVertical'], function (key) {\r\n        if (angular.isDefined($attrs[key]) && falseValueRegExp.test($attrs[key])) self.$options[key] = false;\r\n      });\r\n\r\n      // Publish options on scope\r\n      $scope.$navClass = self.$options.navClass;\r\n      $scope.$activeClass = self.$options.activeClass;\r\n\r\n      $scope.$onClick = function $onClick (evt, pane, index) {\r\n        if (!pane.disabled) {\r\n          self.$setActive(pane.name || index);\r\n        }\r\n\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n      };\r\n\r\n      function navigatePane (index, toLeft) {\r\n        var newIndex = 0;\r\n\r\n        if (toLeft) {\r\n          // Moving to the left\r\n          newIndex = index - 1 < 0 ? (self.$panes.length - 1) : (index - 1);\r\n        } else {\r\n          // Moving to the right\r\n          newIndex = (index + 1) >= self.$panes.length ? 0 : (index + 1);\r\n        }\r\n\r\n        if (self.$panes[newIndex].disabled) {\r\n          navigatePane(newIndex, toLeft);\r\n        } else {\r\n          // As per SS-44480\r\n          $('[id=\"' + self.$panes[newIndex].$labeledBy + '\"]').focus();\r\n          self.$setActive(self.$panes[newIndex].name || newIndex);\r\n        }\r\n      }\r\n\r\n      self.$panes = $scope.$panes = [];\r\n\r\n      // Please use $activePaneChangeListeners if you use `bsActivePane`\r\n      // Because we removed `ngModel` as default, we rename viewChangeListeners to\r\n      // activePaneChangeListeners to make more sense.\r\n      self.$activePaneChangeListeners = self.$viewChangeListeners = [];\r\n\r\n      self.$push = function (pane) {\r\n        if (angular.isUndefined(self.$panes.$active)) {\r\n          $scope.$setActive(pane.name || 0);\r\n        }\r\n\r\n        self.$panes.push(pane);\r\n\r\n        self.$panes.forEach(function (tabPane, index) {\r\n          // Set an id value for the pane so that it can be used in the template\r\n          tabPane.$describedBy = self.$options.id === undefined ? undefined : self.$options.id + '_$tab_' + index;\r\n          tabPane.$labeledBy = self.$options.id === undefined ? undefined : self.$options.id + '_$tab_' + index + '_a';\r\n        });\r\n      };\r\n\r\n      self.$remove = function (pane) {\r\n        var index = self.$panes.indexOf(pane);\r\n        var active = self.$panes.$active;\r\n        var activeIndex;\r\n        if (angular.isString(active)) {\r\n          activeIndex = self.$panes.map(function (pane) {\r\n            return pane.name;\r\n          }).indexOf(active);\r\n        } else {\r\n          activeIndex = self.$panes.$active;\r\n        }\r\n\r\n        // remove pane from $panes array\r\n        self.$panes.splice(index, 1);\r\n\r\n        if (index < activeIndex) {\r\n          // we removed a pane before the active pane, so we need to\r\n          // decrement the active pane index\r\n          activeIndex--;\r\n        } else if (index === activeIndex && activeIndex === self.$panes.length) {\r\n          // we remove the active pane and it was the one at the end,\r\n          // so select the previous one\r\n          activeIndex--;\r\n        }\r\n        if (activeIndex >= 0 && activeIndex < self.$panes.length) {\r\n          self.$setActive(self.$panes[activeIndex].name || activeIndex);\r\n        } else {\r\n          self.$setActive();\r\n        }\r\n      };\r\n\r\n      self.$setActive = $scope.$setActive = function (value) {\r\n        self.$panes.$active = value;\r\n        self.$activePaneChangeListeners.forEach(function (fn) {\r\n          fn();\r\n        });\r\n      };\r\n\r\n      self.$isActive = $scope.$isActive = function ($pane, $index) {\r\n        return self.$panes.$active === $pane.name || self.$panes.$active === $index;\r\n      };\r\n\r\n      self.$onKeyPress = $scope.$onKeyPress = function (e, name, index) {\r\n        if (e.keyCode === 32 || e.charCode === 32 || e.keyCode === 13 || e.charCode === 13) {\r\n          // If space or enter was pressed\r\n          self.$setActive(name);\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n\r\n        } else if (!self.$options.isVertical && (e.keyCode === 37 || e.charCode === 37 || e.keyCode === 39 || e.charCode === 39)) {\r\n          // If the left of right arrow key was pressed.\r\n          navigatePane(index, (e.keyCode === 37 || e.charCode === 37));\r\n        } else if (self.$options.isVertical && (e.keyCode === 38 || e.charCode === 38 || e.keyCode === 40 || e.charCode === 40)) {\r\n          // If the left of right arrow key was pressed.\r\n          navigatePane(index, (e.keyCode === 38 || e.charCode === 38));\r\n        }\r\n      };\r\n    };\r\n\r\n    this.$get = function () {\r\n      var $tab = {};\r\n      $tab.defaults = defaults;\r\n      $tab.controller = controller;\r\n      $tab.addTabControl = _addTabControl;\r\n      $tab.tabsHash = _tabsHash;\r\n      return $tab;\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsTabs', function ($window, $animate, $tab, $parse, $timeout) {\r\n\r\n    var defaults = $tab.defaults;\r\n\r\n    return {\r\n      require: ['?ngModel', 'bsTabs'],\r\n      transclude: true,\r\n      scope: true,\r\n      controller: ['$scope', '$element', '$attrs', '$timeout', $tab.controller],\r\n      templateUrl: function (element, attr) {\r\n        return attr.template || defaults.template;\r\n      },\r\n      link: function postLink (scope, element, attrs, controllers) {\r\n\r\n        var ngModelCtrl = controllers[0];\r\n        var bsTabsCtrl = controllers[1];\r\n\r\n        // Add a way for developers to access tab scope if needed.  This allows for more fine grained control over what\r\n        // tabs are available in the tab component\r\n        if (attrs.tabKey !== '' && attrs.tabKey !== undefined) {\r\n          $tab.addTabControl(attrs.tabKey, bsTabsCtrl);\r\n        }\r\n\r\n        // 'ngModel' does interfere with form validation\r\n        // and status, use `bsActivePane` instead to avoid it\r\n        if (ngModelCtrl) {\r\n\r\n          // Update the modelValue following\r\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n            ngModelCtrl.$setViewValue(bsTabsCtrl.$panes.$active);\r\n          });\r\n\r\n          // modelValue -> $formatters -> viewValue\r\n          ngModelCtrl.$formatters.push(function (modelValue) {\r\n            // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\r\n            bsTabsCtrl.$setActive(modelValue);\r\n            return modelValue;\r\n          });\r\n        }\r\n\r\n        bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n          $timeout(function () {\r\n            // get li elements\r\n            var liElements = element.find('li');\r\n            for (var i = 0; i < liElements.length; i++) {\r\n              var iElement = angular.element(liElements[i]);\r\n              iElement.removeAttr('tabindex');\r\n\r\n              // As per SS-44480\r\n              // if (iElement.hasClass(bsTabsCtrl.$options.activeClass)) {\r\n                // if li is active, set focus to it.\r\n                // iElement.find('a')[0].focus();\r\n              // }\r\n            }\r\n            // delay, for the class (.active) change to reflect in DOM.\r\n          }, 100);\r\n        });\r\n\r\n        if (attrs.bsActivePane) {\r\n          // adapted from angularjs ngModelController bindings\r\n          // https://github.com/angular/angular.js/blob/v1.3.1/src%2Fng%2Fdirective%2Finput.js#L1730\r\n          var parsedBsActivePane = $parse(attrs.bsActivePane);\r\n\r\n          // Update bsActivePane value with change\r\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n            parsedBsActivePane.assign(scope, bsTabsCtrl.$panes.$active);\r\n          });\r\n\r\n          // watch bsActivePane for value changes\r\n          scope.$watch(attrs.bsActivePane, function (newValue, oldValue) {\r\n            bsTabsCtrl.$setActive(newValue);\r\n          }, true);\r\n        }\r\n      }\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsPane', function ($window, $animate, $sce) {\r\n\r\n    return {\r\n      require: ['^?ngModel', '^bsTabs'],\r\n      scope: true,\r\n      link: function postLink (scope, element, attrs, controllers) {\r\n\r\n        // var ngModelCtrl = controllers[0];\r\n        var bsTabsCtrl = controllers[1];\r\n\r\n        // Add base class\r\n        element.addClass('tab-pane');\r\n\r\n        // Set up the assistive attributes\r\n        element.attr('role', 'tabpanel');\r\n\r\n        // Observe title attribute for change\r\n        attrs.$observe('title', function (newValue, oldValue) {\r\n          scope.title = $sce.trustAsHtml(newValue);\r\n        });\r\n\r\n        // Save tab name into scope\r\n        scope.name = attrs.name;\r\n        // Save tab id into scope\r\n        scope.id = attrs.id;\r\n\r\n        scope.name = scope.name || scope.id;\r\n\r\n        // Add animation class\r\n        if (bsTabsCtrl.$options.animation) {\r\n          element.addClass(bsTabsCtrl.$options.animation);\r\n        }\r\n\r\n        attrs.$observe('disabled', function (newValue, oldValue) {\r\n          scope.disabled = scope.$eval(newValue);\r\n        });\r\n\r\n        // Push pane to parent bsTabs controller\r\n        bsTabsCtrl.$push(scope);\r\n\r\n        // Once the push has occured when can then update the element with some properties.\r\n        // Update the aria-labelledby attribute\r\n\t\t// SS-11127 - removed aria-describedby from tab and tab-panel and utilized aria-labeledby on the tab-panel using the ID of the tab and not the ID of the tab link\r\n        if (scope.$describedBy !== undefined) {\r\n          element.attr('aria-labelledby', scope.$describedBy);\r\n        }\r\n\r\n        // remove pane from tab controller when pane is destroyed\r\n        scope.$on('$destroy', function () {\r\n          bsTabsCtrl.$remove(scope);\r\n        });\r\n\r\n        function render () {\r\n          var index = bsTabsCtrl.$panes.indexOf(scope);\r\n\r\n          $animate[bsTabsCtrl.$isActive(scope, index) ? 'addClass' : 'removeClass'](element, bsTabsCtrl.$options.activeClass);\r\n        }\r\n\r\n        bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n          render();\r\n        });\r\n        render();\r\n\r\n      }\r\n    };\r\n\r\n  })\r\n\r\n  .directive('focusOn', function () {\r\n    return {\r\n      restrict: 'A',\r\n      link: function (scope, elem, attr) {\r\n        scope.$watch(attr.focusOn, function (newValue, oldValue) {\r\n          if (newValue !== oldValue && newValue) {\r\n            elem[0].focus();\r\n          }\r\n        });\r\n      }\r\n    };\r\n  });\r\n"],"sourceRoot":"/source/"}