{"version":3,"sources":["modules/tab.js"],"names":["angular","module","provider","_tabsHash","animation","_addTabControl","template","navClass","activeClass","controller","isVertical","this","isDefined","$attrs","key","control","forEach","$scope","self","newIndex","disabled","navigatePane","toLeft","$panes","$setActive","name","index","length","focusCurrentTab","$timeout","activeAs","$activePaneChangeListeners","$viewChangeListeners","$push","pane","isUndefined","$options","copy","defaults","$navClass","$activeClass","falseValueRegExp","preventDefault","stopPropagation","$onClick","evt","tabPane","$labeledBy","$active","active","activeIndex","undefined","id","$remove","indexOf","splice","map","value","fn","$pane","$onKeyPress","e","keyCode","charCode","$tab","$get","directive","scope","require","transclude","templateUrl","attr","link","postLink","ngModelCtrl","bsTabsCtrl","tabKey","addTabControl","controllers","$setViewValue","$formatters","modelValue","push","liElements","element","find","i","iElement","attrs","bsActivePane","parsedBsActivePane","$parse","assign","$watch","newValue","oldValue","$window","$animate","$sce","title","trustAsHtml","render","$isActive","addClass","$describedBy","$on"],"mappings":"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","file":"modules/tab.min.js","sourcesContent":["'use strict';\r\n\r\nangular.module('mgcrea.ngStrap.tab', [])\r\n\r\n  .provider('$tab', function () {\r\n\r\n    var defaults = this.defaults = {\r\n      animation: 'am-fade',\r\n      template: 'tab/tab.tpl.html',\r\n      navClass: 'nav-tabs',\r\n      activeClass: 'active',\r\n      isVertical: false\r\n    };\r\n    var _tabsHash = {};\r\n\r\n    var _addTabControl = function (key, control) {\r\n      if (!_tabsHash[key]) _tabsHash[key] = control;\r\n    };\r\n\r\n    var controller = this.controller = function ($scope, $element, $attrs, $timeout) {\r\n      var self = this;\r\n\r\n      // Attributes options\r\n      self.$options = angular.copy(defaults);\r\n      angular.forEach(['animation', 'navClass', 'activeClass', 'id', 'isVertical'], function (key) {\r\n        if (angular.isDefined($attrs[key])) self.$options[key] = $attrs[key];\r\n      });\r\n\r\n      // use string regex match boolean attr falsy values, leave truthy values be\r\n      var falseValueRegExp = /^(false|0|)$/i;\r\n      angular.forEach(['isVertical'], function (key) {\r\n        if (angular.isDefined($attrs[key]) && falseValueRegExp.test($attrs[key])) self.$options[key] = false;\r\n      });\r\n\r\n      // Publish options on scope\r\n      $scope.$navClass = self.$options.navClass;\r\n      $scope.$activeClass = self.$options.activeClass;\r\n\r\n      $scope.$onClick = function $onClick (evt, pane, index) {\r\n        if (!pane.disabled) {\r\n          self.$setActive(pane.name || index);\r\n          focusCurrentTab();\r\n        }\r\n\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n      };\r\n\r\n      function navigatePane (index, toLeft) {\r\n        var newIndex = 0;\r\n\r\n        if (toLeft) {\r\n          // Moving to the left\r\n          newIndex = index - 1 < 0 ? (self.$panes.length - 1) : (index - 1);\r\n        } else {\r\n          // Moving to the right\r\n          newIndex = (index + 1) >= self.$panes.length ? 0 : (index + 1);\r\n        }\r\n\r\n        if (self.$panes[newIndex].disabled) {\r\n          navigatePane(newIndex, toLeft);\r\n        } else {\r\n          self.$setActive(self.$panes[newIndex].name || newIndex);\r\n          focusCurrentTab();\r\n        }\r\n      }\r\n\r\n      function focusCurrentTab () {\r\n        $timeout(function () {\r\n          var activeAs = angular.element($element[0].querySelectorAll('li.' + self.$options.activeClass));\r\n\r\n          if (activeAs.length > 0 && activeAs[0]) {\r\n            activeAs[0].focus();\r\n          }\r\n        }, 100);\r\n      }\r\n\r\n      self.$panes = $scope.$panes = [];\r\n\r\n      // Please use $activePaneChangeListeners if you use `bsActivePane`\r\n      // Because we removed `ngModel` as default, we rename viewChangeListeners to\r\n      // activePaneChangeListeners to make more sense.\r\n      self.$activePaneChangeListeners = self.$viewChangeListeners = [];\r\n\r\n      self.$push = function (pane) {\r\n        if (angular.isUndefined(self.$panes.$active)) {\r\n          $scope.$setActive(pane.name || 0);\r\n        }\r\n\r\n        self.$panes.push(pane);\r\n\r\n        self.$panes.forEach(function (tabPane, index) {\r\n          // Set an id value for the pane so that it can be used in the template\r\n          tabPane.$describedBy = self.$options.id === undefined ? undefined : self.$options.id + '_$tab_' + index;\r\n          tabPane.$labeledBy = self.$options.id === undefined ? undefined : self.$options.id + '_$tab_' + index + '_a';\r\n        });\r\n      };\r\n\r\n      self.$remove = function (pane) {\r\n        var index = self.$panes.indexOf(pane);\r\n        var active = self.$panes.$active;\r\n        var activeIndex;\r\n        if (angular.isString(active)) {\r\n          activeIndex = self.$panes.map(function (pane) {\r\n            return pane.name;\r\n          }).indexOf(active);\r\n        } else {\r\n          activeIndex = self.$panes.$active;\r\n        }\r\n\r\n        // remove pane from $panes array\r\n        self.$panes.splice(index, 1);\r\n\r\n        if (index < activeIndex) {\r\n          // we removed a pane before the active pane, so we need to\r\n          // decrement the active pane index\r\n          activeIndex--;\r\n        } else if (index === activeIndex && activeIndex === self.$panes.length) {\r\n          // we remove the active pane and it was the one at the end,\r\n          // so select the previous one\r\n          activeIndex--;\r\n        }\r\n        if (activeIndex >= 0 && activeIndex < self.$panes.length) {\r\n          self.$setActive(self.$panes[activeIndex].name || activeIndex);\r\n        } else {\r\n          self.$setActive();\r\n        }\r\n      };\r\n\r\n      self.$setActive = $scope.$setActive = function (value) {\r\n        self.$panes.$active = value;\r\n        self.$activePaneChangeListeners.forEach(function (fn) {\r\n          fn();\r\n        });\r\n      };\r\n\r\n      self.$isActive = $scope.$isActive = function ($pane, $index) {\r\n        return self.$panes.$active === $pane.name || self.$panes.$active === $index;\r\n      };\r\n\r\n      self.$onKeyPress = $scope.$onKeyPress = function (e, name, index) {\r\n        if (e.keyCode === 32 || e.charCode === 32 || e.keyCode === 13 || e.charCode === 13) {\r\n          // If space or enter was pressed\r\n          self.$setActive(name);\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n\r\n        } else if (!self.$options.isVertical && (e.keyCode === 37 || e.charCode === 37 || e.keyCode === 39 || e.charCode === 39)) {\r\n          // If the left of right arrow key was pressed.\r\n          navigatePane(index, (e.keyCode === 37 || e.charCode === 37));\r\n        } else if (self.$options.isVertical && (e.keyCode === 38 || e.charCode === 38 || e.keyCode === 40 || e.charCode === 40)) {\r\n          // If the left of right arrow key was pressed.\r\n          navigatePane(index, (e.keyCode === 38 || e.charCode === 38));\r\n        }\r\n      };\r\n    };\r\n\r\n    this.$get = function () {\r\n      var $tab = {};\r\n      $tab.defaults = defaults;\r\n      $tab.controller = controller;\r\n      $tab.addTabControl = _addTabControl;\r\n      $tab.tabsHash = _tabsHash;\r\n      return $tab;\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsTabs', function ($window, $animate, $tab, $parse, $timeout) {\r\n\r\n    var defaults = $tab.defaults;\r\n\r\n    return {\r\n      require: ['?ngModel', 'bsTabs'],\r\n      transclude: true,\r\n      scope: true,\r\n      controller: ['$scope', '$element', '$attrs', '$timeout', $tab.controller],\r\n      templateUrl: function (element, attr) {\r\n        return attr.template || defaults.template;\r\n      },\r\n      link: function postLink (scope, element, attrs, controllers) {\r\n\r\n        var ngModelCtrl = controllers[0];\r\n        var bsTabsCtrl = controllers[1];\r\n\r\n        // Add a way for developers to access tab scope if needed.  This allows for more fine grained control over what\r\n        // tabs are available in the tab component\r\n        if (attrs.tabKey !== '' && attrs.tabKey !== undefined) {\r\n          $tab.addTabControl(attrs.tabKey, bsTabsCtrl);\r\n        }\r\n\r\n        // 'ngModel' does interfere with form validation\r\n        // and status, use `bsActivePane` instead to avoid it\r\n        if (ngModelCtrl) {\r\n\r\n          // Update the modelValue following\r\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n            ngModelCtrl.$setViewValue(bsTabsCtrl.$panes.$active);\r\n          });\r\n\r\n          // modelValue -> $formatters -> viewValue\r\n          ngModelCtrl.$formatters.push(function (modelValue) {\r\n            // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\r\n            bsTabsCtrl.$setActive(modelValue);\r\n            return modelValue;\r\n          });\r\n        }\r\n\r\n        bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n          $timeout(function () {\r\n            // get li elements\r\n            var liElements = element.find('li');\r\n            for (var i = 0; i < liElements.length; i++) {\r\n              var iElement = angular.element(liElements[i]);\r\n              if (iElement.hasClass(bsTabsCtrl.$options.activeClass)) {\r\n                // if li is active, set focus to it.\r\n                iElement.find('a')[0].focus();\r\n              }\r\n            }\r\n            // delay, for the class (.active) change to reflect in DOM.\r\n          }, 100);\r\n        });\r\n\r\n        if (attrs.bsActivePane) {\r\n          // adapted from angularjs ngModelController bindings\r\n          // https://github.com/angular/angular.js/blob/v1.3.1/src%2Fng%2Fdirective%2Finput.js#L1730\r\n          var parsedBsActivePane = $parse(attrs.bsActivePane);\r\n\r\n          // Update bsActivePane value with change\r\n          bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n            parsedBsActivePane.assign(scope, bsTabsCtrl.$panes.$active);\r\n          });\r\n\r\n          // watch bsActivePane for value changes\r\n          scope.$watch(attrs.bsActivePane, function (newValue, oldValue) {\r\n            bsTabsCtrl.$setActive(newValue);\r\n          }, true);\r\n        }\r\n      }\r\n    };\r\n\r\n  })\r\n\r\n  .directive('bsPane', function ($window, $animate, $sce) {\r\n\r\n    return {\r\n      require: ['^?ngModel', '^bsTabs'],\r\n      scope: true,\r\n      link: function postLink (scope, element, attrs, controllers) {\r\n\r\n        // var ngModelCtrl = controllers[0];\r\n        var bsTabsCtrl = controllers[1];\r\n\r\n        // Add base class\r\n        element.addClass('tab-pane');\r\n\r\n        // Set up the assistive attributes\r\n        element.attr('role', 'tabpanel');\r\n\r\n        // Observe title attribute for change\r\n        attrs.$observe('title', function (newValue, oldValue) {\r\n          scope.title = $sce.trustAsHtml(newValue);\r\n        });\r\n\r\n        // Save tab name into scope\r\n        scope.name = attrs.name;\r\n        // Save tab id into scope\r\n        scope.id = attrs.id;\r\n\r\n        scope.name = scope.name || scope.id;\r\n\r\n        // Add animation class\r\n        if (bsTabsCtrl.$options.animation) {\r\n          element.addClass(bsTabsCtrl.$options.animation);\r\n        }\r\n\r\n        attrs.$observe('disabled', function (newValue, oldValue) {\r\n          scope.disabled = scope.$eval(newValue);\r\n        });\r\n\r\n        // Push pane to parent bsTabs controller\r\n        bsTabsCtrl.$push(scope);\r\n\r\n        // Once the push has occured when can then update the element with some properties.\r\n        // Update the aria-describedby attribute\r\n        if (scope.$describedBy !== undefined) {\r\n          element.attr('aria-describedby', scope.$describedBy);\r\n        }\r\n\r\n        // remove pane from tab controller when pane is destroyed\r\n        scope.$on('$destroy', function () {\r\n          bsTabsCtrl.$remove(scope);\r\n        });\r\n\r\n        function render () {\r\n          var index = bsTabsCtrl.$panes.indexOf(scope);\r\n\r\n          $animate[bsTabsCtrl.$isActive(scope, index) ? 'addClass' : 'removeClass'](element, bsTabsCtrl.$options.activeClass);\r\n        }\r\n\r\n        bsTabsCtrl.$activePaneChangeListeners.push(function () {\r\n          render();\r\n        });\r\n        render();\r\n\r\n      }\r\n    };\r\n\r\n  });\r\n"],"sourceRoot":"/source/"}