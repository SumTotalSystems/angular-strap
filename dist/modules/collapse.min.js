/**
 * angular-strap
 * @version v2.3.12 - 2017-04-19
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes <olivier@mg-crea.com> (https://github.com/mgcrea)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
'use strict';angular.module('mgcrea.ngStrap.collapse',[]).provider('$collapse',function(){var t=this.defaults={animation:'am-collapse',disallowToggle:!1,activeClass:'in',startCollapsed:!1,allowMultiple:!1},e=this.controller=function(e,a,i){function s(t){for(var e=o.$targets.$active,a=0;a<e.length;a++)t<e[a]&&(e[a]=e[a]-1),e[a]===o.$targets.length&&(e[a]=o.$targets.length-1)}function r(t){var e=o.$targets.$active;return-1!==e.indexOf(t)}function n(t){var e=o.$targets.$active.indexOf(t);-1!==e&&(o.$targets[o.$targets.$active[e]].attr('aria-hidden','true'),o.$toggles[o.$targets.$active[e]].attr('aria-expanded','false'),o.$targets.$active.splice(e,1))}function l(t){o.$options.allowMultiple||(void 0!==o.$targets[o.$targets.$active[0]]&&o.$targets[o.$targets.$active[0]].attr('aria-hidden','true'),o.$toggles[o.$targets.$active[0]]&&o.$toggles[o.$targets.$active[0]].attr('aria-expanded','false'),o.$targets.$active.splice(0,1)),-1===o.$targets.$active.indexOf(t)&&(o.$targets.$active.push(t),void 0!==o.$targets[o.$targets.$active[o.$targets.$active.length-1]]&&o.$targets[o.$targets.$active[o.$targets.$active.length-1]].attr('aria-hidden','false'),void 0!==o.$toggles[o.$targets.$active[o.$targets.$active.length-1]]&&o.$toggles[o.$targets.$active[o.$targets.$active.length-1]].attr('aria-expanded','true'))}var o=this;o.$options=angular.copy(t),angular.forEach(['animation','disallowToggle','activeClass','startCollapsed','allowMultiple'],function(t){angular.isDefined(i[t])&&(o.$options[t]=i[t])});var g=/^(false|0|)$/i;angular.forEach(['disallowToggle','startCollapsed','allowMultiple'],function(t){angular.isDefined(i[t])&&g.test(i[t])&&(o.$options[t]=!1)}),o.$toggles=[],o.$targets=[],o.$viewChangeListeners=[],o.$registerToggle=function(t){o.$toggles.push(t),t.attr('aria-expanded','false')},o.$registerTarget=function(t){o.$targets.push(t);var e=0;if(o.$targets){for(e=0;e<o.$targets.length;e++)o.$targets[e].attr('aria-hidden','true');for(e=0;e<o.$targets.$active.length;e++)o.$targets[o.$targets.$active[e]]&&o.$targets[o.$targets.$active[e]].attr('aria-hidden','false'),o.$toggles[o.$targets.$active[e]]&&o.$toggles[o.$targets.$active[e]].attr('aria-expanded','true')}},o.$unregisterToggle=function(t){var e=o.$toggles.indexOf(t);o.$toggles.splice(e,1)},o.$unregisterTarget=function(t){var e=o.$targets.indexOf(t);o.$targets.splice(e,1),o.$options.allowMultiple&&n(t),s(e),o.$viewChangeListeners.forEach(function(t){t()})},o.$targets.$active=o.$options.startCollapsed?[]:[0],o.$setActive=e.$setActive=function(t){angular.isArray(t)?o.$targets.$active=t:!o.$options.disallowToggle&&r(t)?n(t):l(t),o.$viewChangeListeners.forEach(function(t){t()})},o.$activeIndexes=function(){return o.$options.allowMultiple?o.$targets.$active:1===o.$targets.$active.length?o.$targets.$active[0]:-1}};this.$get=function(){var a={};return a.defaults=t,a.controller=e,a}}).directive('bsCollapse',['$window','$animate','$collapse',function(t,e,a){return{require:['?ngModel','bsCollapse'],controller:['$scope','$element','$attrs',a.controller],link:function(t,e,a,i){var s=i[0],r=i[1];s&&(r.$viewChangeListeners.push(function(){s.$setViewValue(r.$activeIndexes())}),s.$formatters.push(function(t){if(angular.isArray(t))r.$setActive(t);else{var e=r.$activeIndexes();angular.isArray(e)?-1===e.indexOf(1*t)&&r.$setActive(1*t):e!==1*t&&r.$setActive(1*t)}return t}))}}}]).directive('bsCollapseToggle',function(){return{require:['^?ngModel','^bsCollapse'],link:function(t,e,a,i){var s=i[1];e.attr('data-toggle','collapse'),s.$registerToggle(e),t.$on('$destroy',function(){s.$unregisterToggle(e)});var r=function(){if(!a.disabled){var i=a.bsCollapseToggle&&'bs-collapse-toggle'!==a.bsCollapseToggle?a.bsCollapseToggle:s.$toggles.indexOf(e);s.$setActive(1*i),t.$apply()}};e.on('click',r),e.bind('keydown keypress',function(t){13===t.which||32===t.which?(r(),t.preventDefault()):16!==t.which&&9!==t.which&&t.preventDefault()})}}}).directive('bsCollapseTarget',['$animate',function(t){return{require:['^?ngModel','^bsCollapse'],link:function(e,a,i,s){function r(){var e=n.$targets.indexOf(a),i=n.$activeIndexes(),s='removeClass';angular.isArray(i)?-1!==i.indexOf(e)&&(s='addClass'):e===i&&(s='addClass'),t[s](a,n.$options.activeClass)}var n=s[1];a.addClass('collapse'),n.$options.animation&&a.addClass(n.$options.animation),n.$registerTarget(a),e.$on('$destroy',function(){n.$unregisterTarget(a)}),n.$viewChangeListeners.push(function(){r()}),r()}}}]);
//# sourceMappingURL=collapse.min.js.map
